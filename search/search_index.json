{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MARSH documentation MARSH stands for Modular Architecture for Reconfigurable Simulation of Helicopters. It is a system for connecting loosely coupled programs into a research flight simulator. Note Colleagues working in FRAME-Lab may also refer to internal FRAME-Wiki for information specific to our laboratories or anything that cannot be published in the open here. Acknowledgements This software is developed in Department of Aerospace Science and Technology of Politecnico di Milano.","title":"Home"},{"location":"#welcome-to-marsh-documentation","text":"MARSH stands for Modular Architecture for Reconfigurable Simulation of Helicopters. It is a system for connecting loosely coupled programs into a research flight simulator. Note Colleagues working in FRAME-Lab may also refer to internal FRAME-Wiki for information specific to our laboratories or anything that cannot be published in the open here.","title":"Welcome to MARSH documentation"},{"location":"#acknowledgements","text":"This software is developed in Department of Aerospace Science and Technology of Politecnico di Milano.","title":"Acknowledgements"},{"location":"documentation/","text":"Documentation Documentation for all projects under MARSH-Sim. All sources for these pages are in a GitHub repository . It is set up to automatically build the documentation on every commit on GitHub servers. The public version at marsh-sim.github.io is updated every time the main branch is changed, the actual files served are from gh-pages . Local installation The pages can be built into HTML and other formats using Python. A virtual environment is recommended to avoid mixing this documentation with system packages. The following commands can be used for Linux: python3 -m venv venv source venv/bin/activate pip install -r requirements.txt For users on Windows, only the line to activate the virtual environment changes to: ./venv/Scripts/activate Usage Once a local installation is complete, the pages can be re-built live with: mkdocs serve Contributing Content is written in Markdown and built to HTML with MkDocs . Markdown files should preferably be formatted with markdownlint extension for VS Code . The pages in the \"MAVLink Definitions\" section contain an initial part written normally, which is followed by automatically generated tables. The tables are (re-)generated with the update_mavlink_tables.py Python script, which should do the complete process of getting the definitions, running the original generator used for MAVLink documentation, and then replacing a relevant part of the pages. This script will be run when publicly deploying updates of the main branch. The generated content of the files in this repository should be commited when there are significant changes in the dialect, for convenience of offline development and reference. Recommended resources Make a Readme Readme Driven Development More Software Projects need Defenses of Design Defense of Design The goal for this setup of the documentation was to make it simple to update to users who come from aerospace engineering background and may not be familiar with the web technologies at large. A single documentation for all related projects was chosen to simplify navigation, allow easier cross linking between different concepts, and make it easier to search. The web pages are generated with MkDocs, because it uses Python which most colleagues already know. The alternatives used by related projects like GitBook (for MAVLink Dev Guide) are not free anymore, and VuePress (for PX4) requires NodeJS. Initially the more popular Sphinx was chosen, but didn't play nicely with Markdown files. This was deemed more important, since we already use it for a README.md file in every repository, is much more popular than reStructured Text, and has simpler syntax. Hosting the page through GitHub Pages and building through GitHub Actions mean there are no dedicated servers needed to be maintained by users. A fully open-source solution independent of a specific for-profit company would be preferred, but at least this can serve as introduction to contributing to other software outside of the University. An early goal for documentation of the dialect was to provide a user experience very close to using the standard messages. The files for MAVLink definitions are re-generated every time the page is published, but can also be updated in the repository. This was chosen to keep the repository simple (no submodules), and always up to date with the newest definitions in the fork. The generated content isn't ignored by git, so the results are the same when working with the repository offline. License Content in this documentation is licensed under Creative Commons Attribution 4.0","title":"Documentation"},{"location":"documentation/#documentation","text":"Documentation for all projects under MARSH-Sim. All sources for these pages are in a GitHub repository . It is set up to automatically build the documentation on every commit on GitHub servers. The public version at marsh-sim.github.io is updated every time the main branch is changed, the actual files served are from gh-pages .","title":"Documentation"},{"location":"documentation/#local-installation","text":"The pages can be built into HTML and other formats using Python. A virtual environment is recommended to avoid mixing this documentation with system packages. The following commands can be used for Linux: python3 -m venv venv source venv/bin/activate pip install -r requirements.txt For users on Windows, only the line to activate the virtual environment changes to: ./venv/Scripts/activate","title":"Local installation"},{"location":"documentation/#usage","text":"Once a local installation is complete, the pages can be re-built live with: mkdocs serve","title":"Usage"},{"location":"documentation/#contributing","text":"Content is written in Markdown and built to HTML with MkDocs . Markdown files should preferably be formatted with markdownlint extension for VS Code . The pages in the \"MAVLink Definitions\" section contain an initial part written normally, which is followed by automatically generated tables. The tables are (re-)generated with the update_mavlink_tables.py Python script, which should do the complete process of getting the definitions, running the original generator used for MAVLink documentation, and then replacing a relevant part of the pages. This script will be run when publicly deploying updates of the main branch. The generated content of the files in this repository should be commited when there are significant changes in the dialect, for convenience of offline development and reference.","title":"Contributing"},{"location":"documentation/#recommended-resources","text":"Make a Readme Readme Driven Development More Software Projects need Defenses of Design","title":"Recommended resources"},{"location":"documentation/#defense-of-design","text":"The goal for this setup of the documentation was to make it simple to update to users who come from aerospace engineering background and may not be familiar with the web technologies at large. A single documentation for all related projects was chosen to simplify navigation, allow easier cross linking between different concepts, and make it easier to search. The web pages are generated with MkDocs, because it uses Python which most colleagues already know. The alternatives used by related projects like GitBook (for MAVLink Dev Guide) are not free anymore, and VuePress (for PX4) requires NodeJS. Initially the more popular Sphinx was chosen, but didn't play nicely with Markdown files. This was deemed more important, since we already use it for a README.md file in every repository, is much more popular than reStructured Text, and has simpler syntax. Hosting the page through GitHub Pages and building through GitHub Actions mean there are no dedicated servers needed to be maintained by users. A fully open-source solution independent of a specific for-profit company would be preferred, but at least this can serve as introduction to contributing to other software outside of the University. An early goal for documentation of the dialect was to provide a user experience very close to using the standard messages. The files for MAVLink definitions are re-generated every time the page is published, but can also be updated in the repository. This was chosen to keep the repository simple (no submodules), and always up to date with the newest definitions in the fork. The generated content isn't ignored by git, so the results are the same when working with the repository offline.","title":"Defense of Design"},{"location":"documentation/#license","text":"Content in this documentation is licensed under Creative Commons Attribution 4.0","title":"License"},{"location":"rationale/","text":"Project rationale The following section is mostly excerpts from the presentations done in the design phase of the system: Proposed options for the simulator architecture Simulator architecture comparison Standard selection for simulator integration Objectives Integrate available hardware and software resources to provide flight simulation for the following projects: Rotorcraft-Pilot Coupling Manned-UnManned Teaming (MUM-T) G-Seat motion cueing Probable future research, not yet defined The requirements expressed as user stories High level goals As a researcher I can add new flight models, measurement devices and cueing systems, so that the simulator is useful for my research. As a project leader I can use the simulator for commercial purposes without paying for any licenses, so that I can involve collaborators from industry environment. As a project leader I can use the simulator without relying on any external service so that I am sure the simulator will work in the future, regardless of an external company As a professor I can easily introduce students to the facility, so that they do practical projects. As a student I can use widespread solutions, standards and libraries, so that I get practical experience for my career after graduating. Conducting studies As a publication or thesis author I can easily gather all trial data into a single entity, so that they can be analyzed and presented in a written work. As a user conducting trials I can control the whole simulator on my own using a single application, so that there are less people to schedule for a trial with a test subject, and I can iterate on my own. As a human factors researcher I can see simulated view with an imperceptible delay, so that a human-in-the-loop piloting is viable. As a human factors researcher I can use the motion platform in closed loop mode, so that the simulation realism for the pilot is increased. Compatibility As a RPC project participant I can use Simulink and MBDyn models, so that I can reuse work already done in the project. As a human factors researcher I can connect the simulation infrastructure to other flight simulation software eg. FlightGear or X-Plane, so that off-the-shelf visual models of cockpit and aircraft can be used. As a user working on UAV support for HEMS missions (eg. MUM-T) I can communicate multiple aircraft (including unmanned) simultaneously, so that I can run shared simulations. As a user of UAVs I can connect PX4 simulation, so that I can collaborate with the drone lab and industrial partners. As a user of G-Seat I can connect the same simulator to moving platform and other cueing devices, so that a comparative study can be performed Developer experience As a simulator developer I can reuse common elements in different configurations, so that there is less work repeated to prepare the simulator for a new study. As a user adding a new device or flight model I can read a well-written and detailed documentation, so that the development process is feasible. As a simulator developer I can divide functionality into smaller components, so that parts of the program are easier to reason about. As a simulator user I can inspect information flowing inside the simulator, so that it is easy to troubleshoot the right part of the system. Standard selection The most common feedback among reviewers was that using an estabilished solution is really important to not depend on the author to on-board every user. Also online search and chatbots will work much better. Fig: xkcd \"Standards\" webcomic , under CC-BY-NC 2.5 license A minimal comparison was made between the suggested libraries, see the comm-library-comparison repository: MQTT Data Distribution Service ZeroMQ MAVLink The minimal prototype was implementing a trivial flight model using MATLAB Simulink and/or Python, and MAVLink proved to have by far the best support in the former. Similar solutions in academia After the initial round of comparison and developent, some examples were found in the academic environment: SIMONA at TU Delft, comparison based only on public documentation: Provides strong real-time guarantees Has already been used for multiple simulators More opinionated about the modules structure, should be written in C++ Partial support for Python; Simulink models through C++ code generation Logs data to HDF5 which seems to be more widely used and more fit for the purpose format Extended Reality Flight Simulation and Control Lab at University of Maryland Very similar objective of swapping between different models and cueing Anegdotally: Moved over from UDP to a differend transport because of performance","title":"Rationale"},{"location":"rationale/#project-rationale","text":"The following section is mostly excerpts from the presentations done in the design phase of the system: Proposed options for the simulator architecture Simulator architecture comparison Standard selection for simulator integration","title":"Project rationale"},{"location":"rationale/#objectives","text":"Integrate available hardware and software resources to provide flight simulation for the following projects: Rotorcraft-Pilot Coupling Manned-UnManned Teaming (MUM-T) G-Seat motion cueing Probable future research, not yet defined The requirements expressed as user stories","title":"Objectives"},{"location":"rationale/#high-level-goals","text":"As a researcher I can add new flight models, measurement devices and cueing systems, so that the simulator is useful for my research. As a project leader I can use the simulator for commercial purposes without paying for any licenses, so that I can involve collaborators from industry environment. As a project leader I can use the simulator without relying on any external service so that I am sure the simulator will work in the future, regardless of an external company As a professor I can easily introduce students to the facility, so that they do practical projects. As a student I can use widespread solutions, standards and libraries, so that I get practical experience for my career after graduating.","title":"High level goals"},{"location":"rationale/#conducting-studies","text":"As a publication or thesis author I can easily gather all trial data into a single entity, so that they can be analyzed and presented in a written work. As a user conducting trials I can control the whole simulator on my own using a single application, so that there are less people to schedule for a trial with a test subject, and I can iterate on my own. As a human factors researcher I can see simulated view with an imperceptible delay, so that a human-in-the-loop piloting is viable. As a human factors researcher I can use the motion platform in closed loop mode, so that the simulation realism for the pilot is increased.","title":"Conducting studies"},{"location":"rationale/#compatibility","text":"As a RPC project participant I can use Simulink and MBDyn models, so that I can reuse work already done in the project. As a human factors researcher I can connect the simulation infrastructure to other flight simulation software eg. FlightGear or X-Plane, so that off-the-shelf visual models of cockpit and aircraft can be used. As a user working on UAV support for HEMS missions (eg. MUM-T) I can communicate multiple aircraft (including unmanned) simultaneously, so that I can run shared simulations. As a user of UAVs I can connect PX4 simulation, so that I can collaborate with the drone lab and industrial partners. As a user of G-Seat I can connect the same simulator to moving platform and other cueing devices, so that a comparative study can be performed","title":"Compatibility"},{"location":"rationale/#developer-experience","text":"As a simulator developer I can reuse common elements in different configurations, so that there is less work repeated to prepare the simulator for a new study. As a user adding a new device or flight model I can read a well-written and detailed documentation, so that the development process is feasible. As a simulator developer I can divide functionality into smaller components, so that parts of the program are easier to reason about. As a simulator user I can inspect information flowing inside the simulator, so that it is easy to troubleshoot the right part of the system.","title":"Developer experience"},{"location":"rationale/#standard-selection","text":"The most common feedback among reviewers was that using an estabilished solution is really important to not depend on the author to on-board every user. Also online search and chatbots will work much better. Fig: xkcd \"Standards\" webcomic , under CC-BY-NC 2.5 license A minimal comparison was made between the suggested libraries, see the comm-library-comparison repository: MQTT Data Distribution Service ZeroMQ MAVLink The minimal prototype was implementing a trivial flight model using MATLAB Simulink and/or Python, and MAVLink proved to have by far the best support in the former.","title":"Standard selection"},{"location":"rationale/#similar-solutions-in-academia","text":"After the initial round of comparison and developent, some examples were found in the academic environment: SIMONA at TU Delft, comparison based only on public documentation: Provides strong real-time guarantees Has already been used for multiple simulators More opinionated about the modules structure, should be written in C++ Partial support for Python; Simulink models through C++ code generation Logs data to HDF5 which seems to be more widely used and more fit for the purpose format Extended Reality Flight Simulation and Control Lab at University of Maryland Very similar objective of swapping between different models and cueing Anegdotally: Moved over from UDP to a differend transport because of performance","title":"Similar solutions in academia"},{"location":"analysis/matlab/","text":"MATLAB analysis Note Requires the \" UAV Toolbox \" to be installed The .tlog files saved by MARSH Manager can be loaded with mavlinktlog function. However, the implementation of mavlinkdialect has the following errors that make reading custom messages more complicated than it would seem from the documentation: The parser crashes with \"Dot indexing is not supported for variables of this type.\" when it encounters a message field that does not have a <description> element containing text, which prevents us from loading all.xml Seems to ignore the <include>common.xml</include> line in dialect file To work around this, the messages can be extracted in multiple steps with separate dialect definitions: dialect_common = mavlinkdialect(\"common.xml\"); logimport_common= mavlinktlog(\"./data/YYMMDDTHHMMSS_comment.tlog\", dialect_common); sim_state_msgs = readmsg(logimport_common, 'MessageName', 'SIM_STATE'); sim_state_data = sim_state_msgs.Messages{1}; % This requires a local copy, which would typically be created by update_mavlink.py dialect_marsh = mavlinkdialect(\"./mavlink_repo/message_definitions/v1.0/marsh.xml\"); logimport_marsh = mavlinktlog(\"./data/YYMMDDTHHMMSS_comment.tlog\", dialect_marsh); mps_msgs = readmsg(logimport,'MessageName','MOTION_PLATFORM_STATE'); mps_data = mps_msgs.Messages{1};","title":"MATLAB"},{"location":"analysis/matlab/#matlab-analysis","text":"Note Requires the \" UAV Toolbox \" to be installed The .tlog files saved by MARSH Manager can be loaded with mavlinktlog function. However, the implementation of mavlinkdialect has the following errors that make reading custom messages more complicated than it would seem from the documentation: The parser crashes with \"Dot indexing is not supported for variables of this type.\" when it encounters a message field that does not have a <description> element containing text, which prevents us from loading all.xml Seems to ignore the <include>common.xml</include> line in dialect file To work around this, the messages can be extracted in multiple steps with separate dialect definitions: dialect_common = mavlinkdialect(\"common.xml\"); logimport_common= mavlinktlog(\"./data/YYMMDDTHHMMSS_comment.tlog\", dialect_common); sim_state_msgs = readmsg(logimport_common, 'MessageName', 'SIM_STATE'); sim_state_data = sim_state_msgs.Messages{1}; % This requires a local copy, which would typically be created by update_mavlink.py dialect_marsh = mavlinkdialect(\"./mavlink_repo/message_definitions/v1.0/marsh.xml\"); logimport_marsh = mavlinktlog(\"./data/YYMMDDTHHMMSS_comment.tlog\", dialect_marsh); mps_msgs = readmsg(logimport,'MessageName','MOTION_PLATFORM_STATE'); mps_data = mps_msgs.Messages{1};","title":"MATLAB analysis"},{"location":"manager/","text":"MARSH Manager The marsh-mgr program is a graphical application for Linux and Windows that serves as the central node in the simulator architecture. It is meant as a single tool to provide: Communicating data between simulator parts (nodes) Controlling the simulation execution and configuration Logging and replaying the simulation data Installation If your operating system or processor architecture do not have a release provided, you can build the application from source code using the developer documentation Linux Download the .AppImage file from the Releases page . Make it executable, using the GUI , or with the following command: chmod +x MARSH_Manager-x86_64.AppImage If you haven't used AppImage files before you might need to install the FUSE library. The command below was tested to work on Ubuntu 22.04, if you still have problems, see AppImage documentation about FUSE . sudo apt install libfuse2 Run the program using GUI, or from terminal: ./MARSH_Manager-x86_64.AppImage Optional: register as marsh-mgr command It is recommended to put your own executables in ~/.local/bin mkdir -p ~/.local/bin cp ./MARSH_Manager-x86_64.AppImage ~/.local/bin/marsh-mgr If the command marsh-mgr is still not found at this point, this directory isn't in PATH variable, where system looks for executables (you can display it with echo $PATH ). An example fix for users of bash (default shell in Ubuntu): echo 'export PATH=~/.local/bin:$PATH' >> ~/.bashrc source ~/.bashrc Windows Download and unpack the ZIP file for Windows from the Releases page . Run marsh-mgr.exe . Note This is a temporary solution, expect some changes. Usage Start the application executable, dependent on your operating system may be the marsh-mgr command. If other nodes are running on different computers, configure \"manager address\" to IP address of the computer running the manager. Saving data The user can choose a folder to save the data, the files are named depending on the logging start time to avoid overwriting previous saves. A \"file comment\" can be added which will be a part of the generated filename, but will also be saved as a STATUSTEXT message at the start of the file. The maximum length for file comment is 50 characters. Tip You can use the file comment to help with your data processing afterwards: write test subject initials, short description of test case etc. The data files saved are \"MAVLink telemetry log\", recognizable by .tlog extension. This binary file format is a de facto standard between multiple UAV flight stacks, the file just contains MAVLink messages, each preceded by a timestamp in microseconds. We have documentation for analysis in: MATLAB . There are also multiple external tools available for viewing the logs, notable examples: pymavlink library which is used for generating libraries and communication for Python also has mavlogdump.py script Some online tools like UAV Log Viewer can read .tlog files. ArduPilot's MAVExplorer can be used for plots, filtering data and showing it on a map Roadmap The following are already planned future features of MARSH Manager, approximately in the order of priority / expected implementation date: Emit parameters to log for nodes with MARSH_MODE_SINGLE_MESSAGE Distribution: Automated builds and releases on GitHub Windows package (with windeployqt ) Connecting nodes on serial port Graph visualisation, considering these candidate solutions: NASA OpenMCT or Grafana Expect updates over WebSocket, see mavlink2rest In-app with Qt Charts Using full message definitions: Displaying units of message fields Displaying angular values sent as radians also as degrees Showing text identifiers for enum values Find length of common prefix from enum names Show bitfields as a collection of flags Maybe later: using tooltips to show descriptions for message fields and enum constants Extend support for Parameter Protocol : Setting parameters of multiple components based on test matrix Parameter descriptions with Component Metadata Protocol Console showing STATUSTEXT messages Replaying log files Resolving duplicate component ids Contributing Contributions to documentation and code are welcome. The repository is on GitHub as marsh-sim/marsh-manager . If you notice a problem, or want to request a new feature, you can create a new issue Code contributions are expected as Pull Requests to that repository. See the developer documentation to get started. Licenses The code for MARSH Manager is licensed under GNU General Public License v3.0 . General application structure provided by Qt Framework under terms of the GNU Lesser General Public License (LGPL) . Communication between components with MAVLink using generated code under MIT License .","title":"MARSH Manager"},{"location":"manager/#marsh-manager","text":"The marsh-mgr program is a graphical application for Linux and Windows that serves as the central node in the simulator architecture. It is meant as a single tool to provide: Communicating data between simulator parts (nodes) Controlling the simulation execution and configuration Logging and replaying the simulation data","title":"MARSH Manager"},{"location":"manager/#installation","text":"If your operating system or processor architecture do not have a release provided, you can build the application from source code using the developer documentation","title":"Installation"},{"location":"manager/#linux","text":"Download the .AppImage file from the Releases page . Make it executable, using the GUI , or with the following command: chmod +x MARSH_Manager-x86_64.AppImage If you haven't used AppImage files before you might need to install the FUSE library. The command below was tested to work on Ubuntu 22.04, if you still have problems, see AppImage documentation about FUSE . sudo apt install libfuse2 Run the program using GUI, or from terminal: ./MARSH_Manager-x86_64.AppImage","title":"Linux"},{"location":"manager/#optional-register-as-marsh-mgr-command","text":"It is recommended to put your own executables in ~/.local/bin mkdir -p ~/.local/bin cp ./MARSH_Manager-x86_64.AppImage ~/.local/bin/marsh-mgr If the command marsh-mgr is still not found at this point, this directory isn't in PATH variable, where system looks for executables (you can display it with echo $PATH ). An example fix for users of bash (default shell in Ubuntu): echo 'export PATH=~/.local/bin:$PATH' >> ~/.bashrc source ~/.bashrc","title":"Optional: register as marsh-mgr command"},{"location":"manager/#windows","text":"Download and unpack the ZIP file for Windows from the Releases page . Run marsh-mgr.exe . Note This is a temporary solution, expect some changes.","title":"Windows"},{"location":"manager/#usage","text":"Start the application executable, dependent on your operating system may be the marsh-mgr command. If other nodes are running on different computers, configure \"manager address\" to IP address of the computer running the manager.","title":"Usage"},{"location":"manager/#saving-data","text":"The user can choose a folder to save the data, the files are named depending on the logging start time to avoid overwriting previous saves. A \"file comment\" can be added which will be a part of the generated filename, but will also be saved as a STATUSTEXT message at the start of the file. The maximum length for file comment is 50 characters. Tip You can use the file comment to help with your data processing afterwards: write test subject initials, short description of test case etc. The data files saved are \"MAVLink telemetry log\", recognizable by .tlog extension. This binary file format is a de facto standard between multiple UAV flight stacks, the file just contains MAVLink messages, each preceded by a timestamp in microseconds. We have documentation for analysis in: MATLAB . There are also multiple external tools available for viewing the logs, notable examples: pymavlink library which is used for generating libraries and communication for Python also has mavlogdump.py script Some online tools like UAV Log Viewer can read .tlog files. ArduPilot's MAVExplorer can be used for plots, filtering data and showing it on a map","title":"Saving data"},{"location":"manager/#roadmap","text":"The following are already planned future features of MARSH Manager, approximately in the order of priority / expected implementation date: Emit parameters to log for nodes with MARSH_MODE_SINGLE_MESSAGE Distribution: Automated builds and releases on GitHub Windows package (with windeployqt ) Connecting nodes on serial port Graph visualisation, considering these candidate solutions: NASA OpenMCT or Grafana Expect updates over WebSocket, see mavlink2rest In-app with Qt Charts Using full message definitions: Displaying units of message fields Displaying angular values sent as radians also as degrees Showing text identifiers for enum values Find length of common prefix from enum names Show bitfields as a collection of flags Maybe later: using tooltips to show descriptions for message fields and enum constants Extend support for Parameter Protocol : Setting parameters of multiple components based on test matrix Parameter descriptions with Component Metadata Protocol Console showing STATUSTEXT messages Replaying log files Resolving duplicate component ids","title":"Roadmap"},{"location":"manager/#contributing","text":"Contributions to documentation and code are welcome. The repository is on GitHub as marsh-sim/marsh-manager . If you notice a problem, or want to request a new feature, you can create a new issue Code contributions are expected as Pull Requests to that repository. See the developer documentation to get started.","title":"Contributing"},{"location":"manager/#licenses","text":"The code for MARSH Manager is licensed under GNU General Public License v3.0 . General application structure provided by Qt Framework under terms of the GNU Lesser General Public License (LGPL) . Communication between components with MAVLink using generated code under MIT License .","title":"Licenses"},{"location":"manager/development/","text":"Develpment Prerequisites The development is done on Ubuntu 22.04 and Windows 10. The application will probably work on other platforms, but only those targets are supported. Git Python A C++ 17 compiler for the platform GCC for Linux MSVC for Windows (installed with Visual Studio) Qt for Open Source Development Qt version 6.5 Qt Creator Ubuntu only : Manually install XCB library: sudo apt install libxcb-cursor0 Optional, but recommended : Qt installs its own CMake, but you may need to install cmake-format manually, with pip install cmakelang or apt install cmake-format To conserve disk space you can select libraries actually used in the project, see the project's CMakeLists.txt , but it's possible in the future more will be used. Downloading the source code To use our own dialect, the project depends on a fork of MAVLink , included as a Git Submodule (which in turn has pymavlink inside). Open the folder where you want to keep the project code, and open it in terminal. To clone the repository with its inner modules, add the --recursive flag: git clone https://github.com/marsh-sim/marsh-manager.git --recursive cd marsh-manager Note If you didn't get the submodules during clone, or they changed to a different commit, you can update them with: git submodule update --init --recursive Building the project MAVLink library After downloading the project for the first time, or after changes in the MAVLink dialect, the communication library needs to be regenerated. A virtual environment is recommended to avoid mixing packages installed here with system packages. The following commands can be used for Linux: python3 -m venv venv source venv/bin/activate pip install -r requirements.txt For users on Windows, only the line to activate the virtual environment changes to: ./venv/Scripts/activate With the environment activated and all prerequisites installed, run the generator script: python scripts/update_mavlink.py Qt application Launch Qt Creator, click \"Open Project...\" on the left and open the CMakeLists.txt file in the marsh-manager directory. When shown the Configure window, mark a kit that starts with \"Desktop Qt 6.5\" and click \"Configure Project\" in the bottom right corner. The project can be compiled and optionally built using the buttons in the bottom left corner, or the \"Build\" menu on the top menu bar. This should rebuild all the necessary files, and optionally start the application and attach a debugger. Note The details of application version are generated by CMake based on last Git commit. You should fully run CMake after every commit. If you didn't change anything, run manually with: \"Build\" > \"Run CMake\" The application can be built in different modes, a short explanation quoted from Stack Overflow : Debug versions are usually slower, larger, and take up more RAM. They have debugging symbols, which make debugging possible and simpler. Release versions are stripped of all non-production information. In debug builds variables and memory are generally set to zero but in release this step is skipped to save time. Extra data is also added around objects and allocated memory as barriers to detect memory overwrites. In this specific project, building is noticeably faster for Debug builds. You can differentiate Debug build from Release by the window title, in which Debug builds also have the commit count on the end of version string after a + sign. Optional: Qt Creator configuration Qt Creator includes Vim mode (\"Edit\" > \"Preferences\" > \"FakeVim\"). Formatting To avoid \"noisy diff\" where changes are just formatting changes, it's recommended to enable format on save for all used kinds of source files: In window \"Edit\" > \"Preferences\": \"C++\" > \"Code Style\" \"Qt Quick\" > \"QML/JS Editing\" \"CMake\" > \"Formatter\"","title":"Development"},{"location":"manager/development/#develpment","text":"","title":"Develpment"},{"location":"manager/development/#prerequisites","text":"The development is done on Ubuntu 22.04 and Windows 10. The application will probably work on other platforms, but only those targets are supported. Git Python A C++ 17 compiler for the platform GCC for Linux MSVC for Windows (installed with Visual Studio) Qt for Open Source Development Qt version 6.5 Qt Creator Ubuntu only : Manually install XCB library: sudo apt install libxcb-cursor0 Optional, but recommended : Qt installs its own CMake, but you may need to install cmake-format manually, with pip install cmakelang or apt install cmake-format To conserve disk space you can select libraries actually used in the project, see the project's CMakeLists.txt , but it's possible in the future more will be used.","title":"Prerequisites"},{"location":"manager/development/#downloading-the-source-code","text":"To use our own dialect, the project depends on a fork of MAVLink , included as a Git Submodule (which in turn has pymavlink inside). Open the folder where you want to keep the project code, and open it in terminal. To clone the repository with its inner modules, add the --recursive flag: git clone https://github.com/marsh-sim/marsh-manager.git --recursive cd marsh-manager Note If you didn't get the submodules during clone, or they changed to a different commit, you can update them with: git submodule update --init --recursive","title":"Downloading the source code"},{"location":"manager/development/#building-the-project","text":"","title":"Building the project"},{"location":"manager/development/#mavlink-library","text":"After downloading the project for the first time, or after changes in the MAVLink dialect, the communication library needs to be regenerated. A virtual environment is recommended to avoid mixing packages installed here with system packages. The following commands can be used for Linux: python3 -m venv venv source venv/bin/activate pip install -r requirements.txt For users on Windows, only the line to activate the virtual environment changes to: ./venv/Scripts/activate With the environment activated and all prerequisites installed, run the generator script: python scripts/update_mavlink.py","title":"MAVLink library"},{"location":"manager/development/#qt-application","text":"Launch Qt Creator, click \"Open Project...\" on the left and open the CMakeLists.txt file in the marsh-manager directory. When shown the Configure window, mark a kit that starts with \"Desktop Qt 6.5\" and click \"Configure Project\" in the bottom right corner. The project can be compiled and optionally built using the buttons in the bottom left corner, or the \"Build\" menu on the top menu bar. This should rebuild all the necessary files, and optionally start the application and attach a debugger. Note The details of application version are generated by CMake based on last Git commit. You should fully run CMake after every commit. If you didn't change anything, run manually with: \"Build\" > \"Run CMake\" The application can be built in different modes, a short explanation quoted from Stack Overflow : Debug versions are usually slower, larger, and take up more RAM. They have debugging symbols, which make debugging possible and simpler. Release versions are stripped of all non-production information. In debug builds variables and memory are generally set to zero but in release this step is skipped to save time. Extra data is also added around objects and allocated memory as barriers to detect memory overwrites. In this specific project, building is noticeably faster for Debug builds. You can differentiate Debug build from Release by the window title, in which Debug builds also have the commit count on the end of version string after a + sign.","title":"Qt application"},{"location":"manager/development/#optional-qt-creator-configuration","text":"Qt Creator includes Vim mode (\"Edit\" > \"Preferences\" > \"FakeVim\").","title":"Optional: Qt Creator configuration"},{"location":"manager/development/#formatting","text":"To avoid \"noisy diff\" where changes are just formatting changes, it's recommended to enable format on save for all used kinds of source files: In window \"Edit\" > \"Preferences\": \"C++\" > \"Code Style\" \"Qt Quick\" > \"QML/JS Editing\" \"CMake\" > \"Formatter\"","title":"Formatting"},{"location":"mavlink/common/","text":"Subset of Common Set These messages are reproduced from the original documentation at mavlink.io \u2013 MAVLink Common Message Set . This is only a subset of the full list , including only messages used in the MARSH project, to make the protocol less overwhelming. Before designing a new message, first check the original documentation linked above. If you find a useful message in the common set, consider editing the list of identifiers used for generating this page. Conventions Field z in the MANUAL_CONTROL message should contain 0 for lowest achievable blade tilt and 1 for highest. As a result, the trim position for collective is probably not 0, and is determined by the flight model. This also means that the input inceptor for collective is between 0 and 1 unlike cyclic and pedals . Do not send negative z values, unless flying acrobatic rotorcraft upside-down or fixed wing with reverse thrust. Message MANUAL_SETPOINT is used for desired control positions (as displayed in Lidia ), so the values for all fields should be treated as normalized controls positions between -1 and 1 instead of rad/s. It is not supported by ArduPilot at all, and only used for Rover in PX4, so no collisions are expected. Different meaning (target, trim) can be assigned to the values in the mode_switch field as defined in MARSH_MANUAL_SETPOINT_MODE Message RAW_RPM for helicopters should send rotor with index 0, and then engines in order. The message SIM_STATE and other messages with accelerations, report them as would be measured by an on-board accelerometer. The values correspond to accelerations in the body reference frame axes: X forward, Y right, Z down. The gravity should also be included, so for a stationary and horizontal vehicle the acceleration vector in meters per second squared is [0, 0, -9.80665], with X component becoming positive as it accelerates forward (tested with ArduPilot SITL ). Specifically message SIM_STATE should be sent with attitude encoded both as quaternion and Euler angles if possible. If a sender is outputting only Euler angles, the quaternion should be sent as [0, 0, 0, 0] (instead of [1, 0, 0, 0] for identity rotation). The receivers can detect if the quaternion contains valid data by comparing the vector magnitude (all components squared) to 1 with some tolerance for numeric error. Definition list Generated on 2025-11-06T16:05:39 from commit 659be11 Enums MAV_FRAME MAV_PARAM_TYPE MAV_RESULT MAV_SEVERITY POSITION_TARGET_TYPEMASK Mav Commands MAV_CMD_SET_MESSAGE_INTERVAL MAV_CMD_REQUEST_MESSAGE Messages PARAM_REQUEST_READ PARAM_REQUEST_LIST PARAM_VALUE PARAM_SET ATTITUDE LOCAL_POSITION_NED MANUAL_CONTROL COMMAND_LONG COMMAND_ACK MANUAL_SETPOINT SET_POSITION_TARGET_LOCAL_NED POSITION_TARGET_LOCAL_NED SIM_STATE STATUSTEXT RAW_RPM COMPONENT_INFORMATION_BASIC MAVLink Include Files: standard.xml MAVLink Protocol Version The current MAVLink version is 2.3. The minor version numbers (after the dot) range from 1-255. This file has protocol dialect: 0. MAVLink Type Enumerations MAV_FRAME [Enum] Coordinate frames used by MAVLink. Not all frames are supported by all commands, messages, or vehicles. Global frames use the following naming conventions: - \"GLOBAL\": Global coordinate frame with WGS84 latitude/longitude and altitude positive over mean sea level (MSL) by default. The following modifiers may be used with \"GLOBAL\": - \"RELATIVE_ALT\": Altitude is relative to the vehicle home position rather than MSL. - \"TERRAIN_ALT\": Altitude is relative to ground level rather than MSL. - \"INT\": Latitude/longitude (in degrees) are scaled by multiplying by 1E7. Local frames use the following naming conventions: - \"LOCAL\": Origin of local frame is fixed relative to earth. Unless otherwise specified this origin is the origin of the vehicle position-estimator (\"EKF\"). - \"BODY\": Origin of local frame travels with the vehicle. NOTE, \"BODY\" does NOT indicate alignment of frame axis with vehicle attitude. - \"OFFSET\": Deprecated synonym for \"BODY\" (origin travels with the vehicle). Not to be used for new frames. Some deprecated frames do not follow these conventions (e.g. MAV_FRAME_BODY_NED and MAV_FRAME_BODY_OFFSET_NED ). Value Field Name Description 0 MAV_FRAME_GLOBAL Global (WGS84) coordinate frame + altitude relative to mean sea level (MSL). 1 MAV_FRAME_LOCAL_NED NED local tangent frame (x: North, y: East, z: Down) with origin fixed relative to earth. 2 MAV_FRAME_MISSION NOT a coordinate frame, indicates a mission command. 3 MAV_FRAME_GLOBAL_RELATIVE_ALT Global (WGS84) coordinate frame + altitude relative to the home position. 4 MAV_FRAME_LOCAL_ENU ENU local tangent frame (x: East, y: North, z: Up) with origin fixed relative to earth. 5 MAV_FRAME_GLOBAL_INT DEPRECATED: Replaced by MAV_FRAME_GLOBAL (2024-03). Use MAV_FRAME_GLOBAL in COMMAND_INT (and elsewhere) as a synonymous replacement. Global (WGS84) coordinate frame (scaled) + altitude relative to mean sea level (MSL). 6 MAV_FRAME_GLOBAL_RELATIVE_ALT_INT DEPRECATED: Replaced by MAV_FRAME_GLOBAL_RELATIVE_ALT (2024-03). Use MAV_FRAME_GLOBAL_RELATIVE_ALT in COMMAND_INT (and elsewhere) as a synonymous replacement. Global (WGS84) coordinate frame (scaled) + altitude relative to the home position. 7 MAV_FRAME_LOCAL_OFFSET_NED NED local tangent frame (x: North, y: East, z: Down) with origin that travels with the vehicle. 8 MAV_FRAME_BODY_NED DEPRECATED: Replaced by MAV_FRAME_BODY_FRD (2019-08). Same as MAV_FRAME_LOCAL_NED when used to represent position values. Same as MAV_FRAME_BODY_FRD when used with velocity/acceleration values. 9 MAV_FRAME_BODY_OFFSET_NED DEPRECATED: Replaced by MAV_FRAME_BODY_FRD (2019-08). This is the same as MAV_FRAME_BODY_FRD . 10 MAV_FRAME_GLOBAL_TERRAIN_ALT Global (WGS84) coordinate frame with AGL altitude (altitude at ground level). 11 MAV_FRAME_GLOBAL_TERRAIN_ALT_INT DEPRECATED: Replaced by MAV_FRAME_GLOBAL_TERRAIN_ALT (2024-03). Use MAV_FRAME_GLOBAL_TERRAIN_ALT in COMMAND_INT (and elsewhere) as a synonymous replacement. Global (WGS84) coordinate frame (scaled) with AGL altitude (altitude at ground level). 12 MAV_FRAME_BODY_FRD FRD local frame aligned to the vehicle's attitude (x: Forward, y: Right, z: Down) with an origin that travels with vehicle. 13 MAV_FRAME_RESERVED_13 DEPRECATED: Replaced by (2019-04). MAV_FRAME_BODY_FLU - Body fixed frame of reference, Z-up (x: Forward, y: Left, z: Up). 14 MAV_FRAME_RESERVED_14 DEPRECATED: Replaced by MAV_FRAME_LOCAL_FRD (2019-04). MAV_FRAME_MOCAP_NED - Odometry local coordinate frame of data given by a motion capture system, Z-down (x: North, y: East, z: Down). 15 MAV_FRAME_RESERVED_15 DEPRECATED: Replaced by MAV_FRAME_LOCAL_FLU (2019-04). MAV_FRAME_MOCAP_ENU - Odometry local coordinate frame of data given by a motion capture system, Z-up (x: East, y: North, z: Up). 16 MAV_FRAME_RESERVED_16 DEPRECATED: Replaced by MAV_FRAME_LOCAL_FRD (2019-04). MAV_FRAME_VISION_NED - Odometry local coordinate frame of data given by a vision estimation system, Z-down (x: North, y: East, z: Down). 17 MAV_FRAME_RESERVED_17 DEPRECATED: Replaced by MAV_FRAME_LOCAL_FLU (2019-04). MAV_FRAME_VISION_ENU - Odometry local coordinate frame of data given by a vision estimation system, Z-up (x: East, y: North, z: Up). 18 MAV_FRAME_RESERVED_18 DEPRECATED: Replaced by MAV_FRAME_LOCAL_FRD (2019-04). MAV_FRAME_ESTIM_NED - Odometry local coordinate frame of data given by an estimator running onboard the vehicle, Z-down (x: North, y: East, z: Down). 19 MAV_FRAME_RESERVED_19 DEPRECATED: Replaced by MAV_FRAME_LOCAL_FLU (2019-04). MAV_FRAME_ESTIM_ENU - Odometry local coordinate frame of data given by an estimator running onboard the vehicle, Z-up (x: East, y: North, z: Up). 20 MAV_FRAME_LOCAL_FRD FRD local tangent frame (x: Forward, y: Right, z: Down) with origin fixed relative to earth. The forward axis is aligned to the front of the vehicle in the horizontal plane. 21 MAV_FRAME_LOCAL_FLU FLU local tangent frame (x: Forward, y: Left, z: Up) with origin fixed relative to earth. The forward axis is aligned to the front of the vehicle in the horizontal plane. MAV_PARAM_TYPE [Enum] Specifies the datatype of a MAVLink parameter. Value Field Name Description 1 MAV_PARAM_TYPE_UINT8 8-bit unsigned integer 2 MAV_PARAM_TYPE_INT8 8-bit signed integer 3 MAV_PARAM_TYPE_UINT16 16-bit unsigned integer 4 MAV_PARAM_TYPE_INT16 16-bit signed integer 5 MAV_PARAM_TYPE_UINT32 32-bit unsigned integer 6 MAV_PARAM_TYPE_INT32 32-bit signed integer 7 MAV_PARAM_TYPE_UINT64 64-bit unsigned integer 8 MAV_PARAM_TYPE_INT64 64-bit signed integer 9 MAV_PARAM_TYPE_REAL32 32-bit floating-point 10 MAV_PARAM_TYPE_REAL64 64-bit floating-point MAV_RESULT [Enum] Result from a MAVLink command ( MAV_CMD ) Value Field Name Description 0 MAV_RESULT_ACCEPTED Command is valid (is supported and has valid parameters), and was executed. 1 MAV_RESULT_TEMPORARILY_REJECTED Command is valid, but cannot be executed at this time. This is used to indicate a problem that should be fixed just by waiting (e.g. a state machine is busy, can't arm because have not got GPS lock, etc.). Retrying later should work. 2 MAV_RESULT_DENIED Command is invalid (is supported but has invalid parameters). Retrying same command and parameters will not work. 3 MAV_RESULT_UNSUPPORTED Command is not supported (unknown). 4 MAV_RESULT_FAILED Command is valid, but execution has failed. This is used to indicate any non-temporary or unexpected problem, i.e. any problem that must be fixed before the command can succeed/be retried. For example, attempting to write a file when out of memory, attempting to arm when sensors are not calibrated, etc. 5 MAV_RESULT_IN_PROGRESS Command is valid and is being executed. This will be followed by further progress updates, i.e. the component may send further COMMAND_ACK messages with result MAV_RESULT_IN_PROGRESS (at a rate decided by the implementation), and must terminate by sending a COMMAND_ACK message with final result of the operation. The COMMAND_ACK .progress field can be used to indicate the progress of the operation. 6 MAV_RESULT_CANCELLED Command has been cancelled (as a result of receiving a COMMAND_CANCEL message). 7 MAV_RESULT_COMMAND_LONG_ONLY Command is only accepted when sent as a COMMAND_LONG . 8 MAV_RESULT_COMMAND_INT_ONLY Command is only accepted when sent as a COMMAND_INT . 9 MAV_RESULT_COMMAND_UNSUPPORTED_MAV_FRAME Command is invalid because a frame is required and the specified frame is not supported. 10 MAV_RESULT_NOT_IN_CONTROL WORK IN PROGRESS: Do not use in stable production environments (it may change). Command has been rejected because source system is not in control of the target system/component. MAV_SEVERITY [Enum] Indicates the severity level, generally used for status messages to indicate their relative urgency. Based on RFC-5424 using expanded definitions at: http://www.kiwisyslog.com/kb/info:-syslog-message-levels/. Value Field Name Description 0 MAV_SEVERITY_EMERGENCY System is unusable. This is a \"panic\" condition. 1 MAV_SEVERITY_ALERT Action should be taken immediately. Indicates error in non-critical systems. 2 MAV_SEVERITY_CRITICAL Action must be taken immediately. Indicates failure in a primary system. 3 MAV_SEVERITY_ERROR Indicates an error in secondary/redundant systems. 4 MAV_SEVERITY_WARNING Indicates about a possible future error if this is not resolved within a given timeframe. Example would be a low battery warning. 5 MAV_SEVERITY_NOTICE An unusual event has occurred, though not an error condition. This should be investigated for the root cause. 6 MAV_SEVERITY_INFO Normal operational messages. Useful for logging. No action is required for these messages. 7 MAV_SEVERITY_DEBUG Useful non-operational messages that can assist in debugging. These should not occur during normal operation. POSITION_TARGET_TYPEMASK [Enum] Bitmap to indicate which dimensions should be ignored by the vehicle: a value of 0b0000000000000000 or 0b0000001000000000 indicates that none of the setpoint dimensions should be ignored. If bit 9 is set the floats afx afy afz should be interpreted as force instead of acceleration. Value Field Name Description 1 POSITION_TARGET_TYPEMASK_X_IGNORE Ignore position x 2 POSITION_TARGET_TYPEMASK_Y_IGNORE Ignore position y 4 POSITION_TARGET_TYPEMASK_Z_IGNORE Ignore position z 8 POSITION_TARGET_TYPEMASK_VX_IGNORE Ignore velocity x 16 POSITION_TARGET_TYPEMASK_VY_IGNORE Ignore velocity y 32 POSITION_TARGET_TYPEMASK_VZ_IGNORE Ignore velocity z 64 POSITION_TARGET_TYPEMASK_AX_IGNORE Ignore acceleration x 128 POSITION_TARGET_TYPEMASK_AY_IGNORE Ignore acceleration y 256 POSITION_TARGET_TYPEMASK_AZ_IGNORE Ignore acceleration z 512 POSITION_TARGET_TYPEMASK_FORCE_SET Use force instead of acceleration 1024 POSITION_TARGET_TYPEMASK_YAW_IGNORE Ignore yaw 2048 POSITION_TARGET_TYPEMASK_YAW_RATE_IGNORE Ignore yaw rate MAVLink Commands ( MAV_CMD ) MAVLink commands ( MAV_CMD ) and messages are different! These commands define the values of up to 7 parameters that are packaged INSIDE specific messages used in the Mission Protocol and Command Protocol. Use commands for actions in missions or if you need acknowledgment and/or retry logic from a request. Otherwise use messages. Commands to be executed by the MAV. They can be executed on user request, or as part of a mission script. If the action is used in a mission, the parameter mapping to the waypoint/mission message is as follows: Param 1, Param 2, Param 3, Param 4, X: Param 5, Y:Param 6, Z:Param 7. This command list is similar what ARINC 424 is for commercial aircraft: A data format how to interpret waypoint/mission data. NaN and INT32_MAX may be used in float/integer params (respectively) to indicate optional/default values (e.g. to use the component's current yaw or latitude rather than a specific value). See https://mavlink.io/en/guide/xml_schema.html#MAV_CMD for information about the structure of the MAV_CMD entries MAV_CMD_SET_MESSAGE_INTERVAL ( 511 ) [Command] Set the interval between messages for a particular MAVLink message ID. This interface replaces REQUEST_DATA_STREAM . Param (:Label) Description Values Units 1: Message ID The MAVLink message ID min: 0 max: 16777215 increment: 1 2: Interval The interval between two messages. -1: disable. 0: request default rate (which may be zero). min: -1 increment: 1 us 3: Req Param 3 Use for index ID, if required. Otherwise, the use of this parameter (if any) must be defined in the requested message. By default assumed not used (0). When used as an index ID, 0 means \"all instances\", \"1\" means the first instance in the sequence (the emitted message will have an id of 0 if message ids are 0-indexed, or 1 if index numbers start from one). 4: Req Param 4 The use of this parameter (if any), must be defined in the requested message. By default assumed not used (0). 5: Req Param 5 The use of this parameter (if any), must be defined in the requested message. By default assumed not used (0/NaN). 6: Req Param 6 The use of this parameter (if any), must be defined in the requested message. By default assumed not used (0/NaN). 7: Response Target Target address of message stream (if message has target address fields). 0: Flight-stack default (recommended), 1: address of requester, 2: broadcast. min: 0 max: 2 increment: 1 MAV_CMD_REQUEST_MESSAGE ( 512 ) [Command] Request the target system(s) emit a single instance of a specified message (i.e. a \"one-shot\" version of MAV_CMD_SET_MESSAGE_INTERVAL ). Param (:Label) Description Values 1: Message ID The MAVLink message ID of the requested message. min: 0 max: 16777215 increment: 1 2: Req Param 1 Use for index ID, if required. Otherwise, the use of this parameter (if any) must be defined in the requested message. By default assumed not used (0). 3: Req Param 2 The use of this parameter (if any), must be defined in the requested message. By default assumed not used (0). 4: Req Param 3 The use of this parameter (if any), must be defined in the requested message. By default assumed not used (0). 5: Req Param 4 The use of this parameter (if any), must be defined in the requested message. By default assumed not used (0). 6: Req Param 5 The use of this parameter (if any), must be defined in the requested message. By default assumed not used (0). 7: Response Target Target address for requested message (if message has target address fields). 0: Flight-stack default, 1: address of requester, 2: broadcast. min: 0 max: 2 increment: 1 MAVLink Messages PARAM_REQUEST_READ ( #20 ) [Message] Request to read the onboard parameter with the param_id string id. Onboard parameters are stored as key[const char*] -> value[float]. This allows to send a parameter to any other component (such as the GCS) without the need of previous knowledge of possible parameter names. Thus the same GCS can store different parameters for different autopilots. See also https://mavlink.io/en/services/parameter.html for a full documentation of QGroundControl and IMU code. Field Name Type Description target_system uint8_t System ID target_component uint8_t Component ID param_id char[16] Onboard parameter id, terminated by NULL if the length is less than 16 human-readable chars and WITHOUT null termination (NULL) byte if the length is exactly 16 chars - applications have to provide 16+1 bytes storage if the ID is stored as string param_index int16_t Parameter index. Send -1 to use the param ID field as identifier (else the param id will be ignored) PARAM_REQUEST_LIST ( #21 ) [Message] Request all parameters of this component. After this request, all parameters are emitted. The parameter microservice is documented at https://mavlink.io/en/services/parameter.html Field Name Type Description target_system uint8_t System ID target_component uint8_t Component ID PARAM_VALUE ( #22 ) [Message] Emit the value of a onboard parameter. The inclusion of param_count and param_index in the message allows the recipient to keep track of received parameters and allows him to re-request missing parameters after a loss or timeout. The parameter microservice is documented at https://mavlink.io/en/services/parameter.html Field Name Type Values Description param_id char[16] Onboard parameter id, terminated by NULL if the length is less than 16 human-readable chars and WITHOUT null termination (NULL) byte if the length is exactly 16 chars - applications have to provide 16+1 bytes storage if the ID is stored as string param_value float Onboard parameter value param_type uint8_t MAV_PARAM_TYPE Onboard parameter type. param_count uint16_t Total number of onboard parameters param_index uint16_t Index of this onboard parameter PARAM_SET ( #23 ) [Message] Set a parameter value (write new value to permanent storage). The receiving component should acknowledge the new parameter value by broadcasting a PARAM_VALUE message (broadcasting ensures that multiple GCS all have an up-to-date list of all parameters). If the sending GCS did not receive a PARAM_VALUE within its timeout time, it should re-send the PARAM_SET message. The parameter microservice is documented at https://mavlink.io/en/services/parameter.html. Field Name Type Values Description target_system uint8_t System ID target_component uint8_t Component ID param_id char[16] Onboard parameter id, terminated by NULL if the length is less than 16 human-readable chars and WITHOUT null termination (NULL) byte if the length is exactly 16 chars - applications have to provide 16+1 bytes storage if the ID is stored as string param_value float Onboard parameter value param_type uint8_t MAV_PARAM_TYPE Onboard parameter type. ATTITUDE ( #30 ) [Message] The attitude in the aeronautical frame (right-handed, Z-down, Y-right, X-front, ZYX, intrinsic). Field Name Type Units Description time_boot_ms uint32_t ms Timestamp (time since system boot). roll float rad Roll angle (-pi..+pi) pitch float rad Pitch angle (-pi..+pi) yaw float rad Yaw angle (-pi..+pi) rollspeed float rad/s Roll angular speed pitchspeed float rad/s Pitch angular speed yawspeed float rad/s Yaw angular speed LOCAL_POSITION_NED ( #32 ) [Message] The filtered local position (e.g. fused computer vision and accelerometers). Coordinate frame is right-handed, Z-axis down (aeronautical frame, NED / north-east-down convention) Field Name Type Units Description time_boot_ms uint32_t ms Timestamp (time since system boot). x float m X Position y float m Y Position z float m Z Position vx float m/s X Speed vy float m/s Y Speed vz float m/s Z Speed MANUAL_CONTROL ( #69 ) [Message] Manual (joystick) control message. This message represents movement axes and button using standard joystick axes nomenclature. Unused axes can be disabled and buttons states are transmitted as individual on/off bits of a bitmask. For more information see https://mavlink.io/en/manual_control.html Field Name Type Description target uint8_t The system to be controlled. x int16_t X-axis, normalized to the range [-1000,1000]. A value of INT16_MAX indicates that this axis is invalid. Generally corresponds to forward(1000)-backward(-1000) movement on a joystick and the pitch of a vehicle. y int16_t Y-axis, normalized to the range [-1000,1000]. A value of INT16_MAX indicates that this axis is invalid. Generally corresponds to left(-1000)-right(1000) movement on a joystick and the roll of a vehicle. z int16_t Z-axis, normalized to the range [-1000,1000]. A value of INT16_MAX indicates that this axis is invalid. Generally corresponds to a separate slider movement with maximum being 1000 and minimum being -1000 on a joystick and the thrust of a vehicle. Positive values are positive thrust, negative values are negative thrust. r int16_t R-axis, normalized to the range [-1000,1000]. A value of INT16_MAX indicates that this axis is invalid. Generally corresponds to a twisting of the joystick, with counter-clockwise being 1000 and clockwise being -1000, and the yaw of a vehicle. buttons uint16_t A bitfield corresponding to the joystick buttons' 0-15 current state, 1 for pressed, 0 for released. The lowest bit corresponds to Button 1. buttons2 ** uint16_t A bitfield corresponding to the joystick buttons' 16-31 current state, 1 for pressed, 0 for released. The lowest bit corresponds to Button 16. enabled_extensions ** uint8_t Set bits to 1 to indicate which of the following extension fields contain valid data: bit 0: pitch, bit 1: roll, bit 2: aux1, bit 3: aux2, bit 4: aux3, bit 5: aux4, bit 6: aux5, bit 7: aux6 s ** int16_t Pitch-only-axis, normalized to the range [-1000,1000]. Generally corresponds to pitch on vehicles with additional degrees of freedom. Valid if bit 0 of enabled_extensions field is set. Set to 0 if invalid. t ** int16_t Roll-only-axis, normalized to the range [-1000,1000]. Generally corresponds to roll on vehicles with additional degrees of freedom. Valid if bit 1 of enabled_extensions field is set. Set to 0 if invalid. aux1 ** int16_t Aux continuous input field 1. Normalized in the range [-1000,1000]. Purpose defined by recipient. Valid data if bit 2 of enabled_extensions field is set. 0 if bit 2 is unset. aux2 ** int16_t Aux continuous input field 2. Normalized in the range [-1000,1000]. Purpose defined by recipient. Valid data if bit 3 of enabled_extensions field is set. 0 if bit 3 is unset. aux3 ** int16_t Aux continuous input field 3. Normalized in the range [-1000,1000]. Purpose defined by recipient. Valid data if bit 4 of enabled_extensions field is set. 0 if bit 4 is unset. aux4 ** int16_t Aux continuous input field 4. Normalized in the range [-1000,1000]. Purpose defined by recipient. Valid data if bit 5 of enabled_extensions field is set. 0 if bit 5 is unset. aux5 ** int16_t Aux continuous input field 5. Normalized in the range [-1000,1000]. Purpose defined by recipient. Valid data if bit 6 of enabled_extensions field is set. 0 if bit 6 is unset. aux6 ** int16_t Aux continuous input field 6. Normalized in the range [-1000,1000]. Purpose defined by recipient. Valid data if bit 7 of enabled_extensions field is set. 0 if bit 7 is unset. COMMAND_LONG ( #76 ) [Message] Send a command with up to seven parameters to the MAV. COMMAND_INT is generally preferred when sending MAV_CMD commands that include positional information; it offers higher precision and allows the MAV_FRAME to be specified (which may otherwise be ambiguous, particularly for altitude). The command microservice is documented at https://mavlink.io/en/services/command.html Field Name Type Values Description target_system uint8_t System which should execute the command target_component uint8_t Component which should execute the command, 0 for all components command uint16_t MAV_CMD Command ID (of command to send). confirmation uint8_t 0: First transmission of this command. 1-255: Confirmation transmissions (e.g. for kill command) param1 float Parameter 1 (for the specific command). param2 float Parameter 2 (for the specific command). param3 float Parameter 3 (for the specific command). param4 float Parameter 4 (for the specific command). param5 float Parameter 5 (for the specific command). param6 float Parameter 6 (for the specific command). param7 float Parameter 7 (for the specific command). COMMAND_ACK ( #77 ) [Message] Report status of a command. Includes feedback whether the command was executed. The command microservice is documented at https://mavlink.io/en/services/command.html Field Name Type Units Values Description command uint16_t MAV_CMD Command ID (of acknowledged command). result uint8_t MAV_RESULT Result of command. progress ** uint8_t % The progress percentage when result is MAV_RESULT_IN_PROGRESS . Values: [0-100], or UINT8_MAX if the progress is unknown. result_param2 ** int32_t Additional result information. Can be set with a command-specific enum containing command-specific error reasons for why the command might be denied. If used, the associated enum must be documented in the corresponding MAV_CMD (this enum should have a 0 value to indicate \"unused\" or \"unknown\"). target_system ** uint8_t System ID of the target recipient. This is the ID of the system that sent the command for which this COMMAND_ACK is an acknowledgement. target_component ** uint8_t Component ID of the target recipient. This is the ID of the system that sent the command for which this COMMAND_ACK is an acknowledgement. MANUAL_SETPOINT ( #81 ) [Message] Setpoint in roll, pitch, yaw and thrust from the operator Field Name Type Units Description time_boot_ms uint32_t ms Timestamp (time since system boot). roll float rad/s Desired roll rate pitch float rad/s Desired pitch rate yaw float rad/s Desired yaw rate thrust float Collective thrust, normalized to 0 .. 1 mode_switch uint8_t Flight mode switch position, 0.. 255 manual_override_switch uint8_t Override mode switch position, 0.. 255 SET_POSITION_TARGET_LOCAL_NED ( #84 ) [Message] Sets a desired vehicle position in a local north-east-down coordinate frame. Used by an external controller to command the vehicle (manual controller or other system). Field Name Type Units Values Description time_boot_ms uint32_t ms Timestamp (time since system boot). target_system uint8_t System ID target_component uint8_t Component ID coordinate_frame uint8_t MAV_FRAME Valid options are: MAV_FRAME_LOCAL_NED = 1, MAV_FRAME_LOCAL_OFFSET_NED = 7, MAV_FRAME_BODY_NED = 8, MAV_FRAME_BODY_OFFSET_NED = 9 type_mask uint16_t POSITION_TARGET_TYPEMASK Bitmap to indicate which dimensions should be ignored by the vehicle. x float m X Position in NED frame y float m Y Position in NED frame z float m Z Position in NED frame (note, altitude is negative in NED) vx float m/s X velocity in NED frame vy float m/s Y velocity in NED frame vz float m/s Z velocity in NED frame afx float m/s/s X acceleration or force (if bit 10 of type_mask is set) in NED frame in meter / s^2 or N afy float m/s/s Y acceleration or force (if bit 10 of type_mask is set) in NED frame in meter / s^2 or N afz float m/s/s Z acceleration or force (if bit 10 of type_mask is set) in NED frame in meter / s^2 or N yaw float rad yaw setpoint yaw_rate float rad/s yaw rate setpoint POSITION_TARGET_LOCAL_NED ( #85 ) [Message] Reports the current commanded vehicle position, velocity, and acceleration as specified by the autopilot. This should match the commands sent in SET_POSITION_TARGET_LOCAL_NED if the vehicle is being controlled this way. Field Name Type Units Values Description time_boot_ms uint32_t ms Timestamp (time since system boot). coordinate_frame uint8_t MAV_FRAME Valid options are: MAV_FRAME_LOCAL_NED = 1, MAV_FRAME_LOCAL_OFFSET_NED = 7, MAV_FRAME_BODY_NED = 8, MAV_FRAME_BODY_OFFSET_NED = 9 type_mask uint16_t POSITION_TARGET_TYPEMASK Bitmap to indicate which dimensions should be ignored by the vehicle. x float m X Position in NED frame y float m Y Position in NED frame z float m Z Position in NED frame (note, altitude is negative in NED) vx float m/s X velocity in NED frame vy float m/s Y velocity in NED frame vz float m/s Z velocity in NED frame afx float m/s/s X acceleration or force (if bit 10 of type_mask is set) in NED frame in meter / s^2 or N afy float m/s/s Y acceleration or force (if bit 10 of type_mask is set) in NED frame in meter / s^2 or N afz float m/s/s Z acceleration or force (if bit 10 of type_mask is set) in NED frame in meter / s^2 or N yaw float rad yaw setpoint yaw_rate float rad/s yaw rate setpoint SIM_STATE ( #108 ) [Message] Status of simulation environment, if used Field Name Type Units Description q1 float True attitude quaternion component 1, w (1 in null-rotation) q2 float True attitude quaternion component 2, x (0 in null-rotation) q3 float True attitude quaternion component 3, y (0 in null-rotation) q4 float True attitude quaternion component 4, z (0 in null-rotation) roll float rad Attitude roll expressed as Euler angles, not recommended except for human-readable outputs pitch float rad Attitude pitch expressed as Euler angles, not recommended except for human-readable outputs yaw float rad Attitude yaw expressed as Euler angles, not recommended except for human-readable outputs xacc float m/s/s X acceleration yacc float m/s/s Y acceleration zacc float m/s/s Z acceleration xgyro float rad/s Angular speed around X axis ygyro float rad/s Angular speed around Y axis zgyro float rad/s Angular speed around Z axis lat float deg Latitude (lower precision). Both this and the lat_int field should be set. lon float deg Longitude (lower precision). Both this and the lon_int field should be set. alt float m Altitude std_dev_horz float Horizontal position standard deviation std_dev_vert float Vertical position standard deviation vn float m/s True velocity in north direction in earth-fixed NED frame ve float m/s True velocity in east direction in earth-fixed NED frame vd float m/s True velocity in down direction in earth-fixed NED frame lat_int ** int32_t degE7 Latitude (higher precision). If 0, recipients should use the lat field value (otherwise this field is preferred). lon_int ** int32_t degE7 Longitude (higher precision). If 0, recipients should use the lon field value (otherwise this field is preferred). STATUSTEXT ( #253 ) [Message] Status text message. These messages are printed in yellow in the COMM console of QGroundControl. WARNING: They consume quite some bandwidth, so use only for important status and error messages. If implemented wisely, these messages are buffered on the MCU and sent only at a limited rate (e.g. 10 Hz). Field Name Type Values Description severity uint8_t MAV_SEVERITY Severity of status. Relies on the definitions within RFC-5424. text char[50] Status text message, without null termination character id ** uint16_t Unique (opaque) identifier for this statustext message. May be used to reassemble a logical long-statustext message from a sequence of chunks. A value of zero indicates this is the only chunk in the sequence and the message can be emitted immediately. chunk_seq ** uint8_t This chunk's sequence number; indexing is from zero. Any null character in the text field is taken to mean this was the last chunk. RAW_RPM ( #339 ) [Message] (MAVLink 2) RPM sensor data message. Field Name Type Units Description index uint8_t Index of this RPM sensor (0-indexed) frequency float rpm Indicated rate COMPONENT_INFORMATION_BASIC ( #396 ) [Message] (MAVLink 2) Basic component information data. Should be requested using MAV_CMD_REQUEST_MESSAGE on startup, or when required. Field Name Type Units Values Description time_boot_ms uint32_t ms Timestamp (time since system boot). capabilities uint64_t MAV_PROTOCOL_CAPABILITY Component capability flags time_manufacture_s uint32_t s Date of manufacture as a UNIX Epoch time (since 1.1.1970) in seconds. vendor_name char[32] Name of the component vendor. Needs to be zero terminated. The field is optional and can be empty/all zeros. model_name char[32] Name of the component model. Needs to be zero terminated. The field is optional and can be empty/all zeros. software_version char[24] Software version. The recommended format is SEMVER: 'major.minor.patch' (any format may be used). The field must be zero terminated if it has a value. The field is optional and can be empty/all zeros. hardware_version char[24] Hardware version. The recommended format is SEMVER: 'major.minor.patch' (any format may be used). The field must be zero terminated if it has a value. The field is optional and can be empty/all zeros. serial_number char[32] Hardware serial number. The field must be zero terminated if it has a value. The field is optional and can be empty/all zeros.","title":"Subset of Common Set"},{"location":"mavlink/common/#subset-of-common-set","text":"These messages are reproduced from the original documentation at mavlink.io \u2013 MAVLink Common Message Set . This is only a subset of the full list , including only messages used in the MARSH project, to make the protocol less overwhelming. Before designing a new message, first check the original documentation linked above. If you find a useful message in the common set, consider editing the list of identifiers used for generating this page.","title":"Subset of Common Set"},{"location":"mavlink/common/#conventions","text":"Field z in the MANUAL_CONTROL message should contain 0 for lowest achievable blade tilt and 1 for highest. As a result, the trim position for collective is probably not 0, and is determined by the flight model. This also means that the input inceptor for collective is between 0 and 1 unlike cyclic and pedals . Do not send negative z values, unless flying acrobatic rotorcraft upside-down or fixed wing with reverse thrust. Message MANUAL_SETPOINT is used for desired control positions (as displayed in Lidia ), so the values for all fields should be treated as normalized controls positions between -1 and 1 instead of rad/s. It is not supported by ArduPilot at all, and only used for Rover in PX4, so no collisions are expected. Different meaning (target, trim) can be assigned to the values in the mode_switch field as defined in MARSH_MANUAL_SETPOINT_MODE Message RAW_RPM for helicopters should send rotor with index 0, and then engines in order. The message SIM_STATE and other messages with accelerations, report them as would be measured by an on-board accelerometer. The values correspond to accelerations in the body reference frame axes: X forward, Y right, Z down. The gravity should also be included, so for a stationary and horizontal vehicle the acceleration vector in meters per second squared is [0, 0, -9.80665], with X component becoming positive as it accelerates forward (tested with ArduPilot SITL ). Specifically message SIM_STATE should be sent with attitude encoded both as quaternion and Euler angles if possible. If a sender is outputting only Euler angles, the quaternion should be sent as [0, 0, 0, 0] (instead of [1, 0, 0, 0] for identity rotation). The receivers can detect if the quaternion contains valid data by comparing the vector magnitude (all components squared) to 1 with some tolerance for numeric error.","title":"Conventions"},{"location":"mavlink/common/#definition-list","text":"Generated on 2025-11-06T16:05:39 from commit 659be11 Enums MAV_FRAME MAV_PARAM_TYPE MAV_RESULT MAV_SEVERITY POSITION_TARGET_TYPEMASK Mav Commands MAV_CMD_SET_MESSAGE_INTERVAL MAV_CMD_REQUEST_MESSAGE Messages PARAM_REQUEST_READ PARAM_REQUEST_LIST PARAM_VALUE PARAM_SET ATTITUDE LOCAL_POSITION_NED MANUAL_CONTROL COMMAND_LONG COMMAND_ACK MANUAL_SETPOINT SET_POSITION_TARGET_LOCAL_NED POSITION_TARGET_LOCAL_NED SIM_STATE STATUSTEXT RAW_RPM COMPONENT_INFORMATION_BASIC MAVLink Include Files: standard.xml","title":"Definition list"},{"location":"mavlink/marsh/","text":"MARSH Dialect This page documents all extensions to MAVLink that were required for the simulator. The definitions are in the marsh.xml file on the dialect branch in our fork of main MAVLink repository . All other projects need to generate and appropriate libraries, following the mavlink.io \u2013 Generating MAVLink Libraries documentation. When in need of a definition for a given functionality which is not covered here, first consult the Common Message Set, both our subset and full list . If a new definition is actually needed, follow the original guide on how to define MAVLink Messages & Enums Note The ids of all messages have been changed in commit 3621719 on 2025-05-16 for inclusion in the upstream MAVLink repository. Custom messages saved in .tlog files before that change will not be recognised by newer code. Definition list Generated on 2025-11-06T16:05:39 from commit 659be11 Enums MARSH_TYPE MARSH_MODE_FLAGS CONTROL_AXIS MARSH_MANUAL_SETPOINT_MODE MOTION_PLATFORM_MODE MOTION_PLATFORM_HEALTH EYE_TRACKING_EVENT_TYPE HUMAN_BODY_POINT Mav Commands Messages CONTROL_LOADING_AXIS MOTION_PLATFORM_STATE REXROTH_MOTION_PLATFORM MOTION_CUE_EXTRA EYE_TRACKING_DATA EYE_TRACKING_EVENT HUMAN_BODY_POSE MAVLink Include Files: common.xml This file has protocol dialect: 3. MAVLink Type Enumerations MARSH_TYPE [Enum] Component types for different nodes of the simulator network (flight model, controls, visualisation etc.). Components will always receive messages from the Manager relevant for their type. Only the first component in a network with a given system ID and type will have its messages forwarded by the Manager, all other ones will only be treated as output (will be shadowed). This enum is an extension of MAV_TYPE documented at https://mavlink.io/en/messages/minimal.html#MAV_TYPE Value Field Name Description 100 MARSH_TYPE_MANAGER The simulation manager responsible for routing packets between different nodes. Typically MARSH Manager, see https://marsh-sim.github.io/manager.html 101 MARSH_TYPE_FLIGHT_MODEL Component simulating flight dynamics of the aircraft. 102 MARSH_TYPE_CONTROLS Component providing pilot control inputs. 103 MARSH_TYPE_VISUALISATION Component showing the visual situation to the pilot. 104 MARSH_TYPE_INSTRUMENTS Component implementing pilot instrument panel. 105 MARSH_TYPE_MOTION_PLATFORM Component that moves the entire cockpit for motion cueing. 106 MARSH_TYPE_GSEAT Component for in-seat motion cueing. 107 MARSH_TYPE_EYE_TRACKER Component providing gaze data of pilot eyes. 108 MARSH_TYPE_CONTROL_LOADING Component measuring and actuating forces on pilot control inputs. 109 MARSH_TYPE_VIBRATION_SOURCE Component providing vibrations for system identification, road rumble, gusts, etc. 110 MARSH_TYPE_PILOT_TARGET Component providing target for the pilot to follow like controls positions, aircraft state, ILS path etc. 111 MARSH_TYPE_EXPERIMENT_DIRECTOR Principal component controlling the main scenario of a given test, (unlike lower level MARSH_TYPE_PILOT_TARGET or MARSH_TYPE_MANAGER for overall communication). MARSH_MODE_FLAGS [Enum] These values are MARSH-specific modes intended to be sent in custom_mode field of HEARTBEAT message. Prefer defining values in the most significant byte (between 2^24 and 2^31) to leave the lower three bytes to contain a message id Value Field Name Description 0x1000000 MARSH_MODE_SINGLE_MESSAGE Request Manager to only send one specific message, advised for very resource limited nodes or with control flow limitations like Simulink. That message id should be in the lower three bytes of the mode, which can be done by adding it to the flags. 0x2000000 MARSH_MODE_ALL_MESSAGES Request Manager to send every message going out to any of the clients. CONTROL_AXIS [Enum] Specific axis of pilot control inputs, with order corresponding to x, y, z, r fields in MANUAL_CONTROL message. Value Field Name Description 0 CONTROL_AXIS_ROLL Roll axis, with positive values corresponding to stick right movement, causing the vehicle to roll right. For helicopters this is lateral cyclic. 1 CONTROL_AXIS_PITCH Pitch axis, with positive values corresponding to stick forward movement, causing the vehicle to move nose down. For helicopters this is longitudinal cyclic. 2 CONTROL_AXIS_THRUST Main thrust, with positive values corresponding to going faster and higher. For helicopters this is collective. 3 CONTROL_AXIS_YAW Yaw axis, with positive values corresponding to pushing right pedal, causing the vehicle to face right direction. For helicopters this is tail collective. MARSH_MANUAL_SETPOINT_MODE [Enum] Usage of MANUAL_SETPOINT message, sent in mode_switch field. Value Field Name Description 0 MARSH_MANUAL_SETPOINT_MODE_DEFAULT Default meaning of the message. This should be sent by inceptors when using a flight control system in separate node to differentiate from FCS outputs. 1 MARSH_MANUAL_SETPOINT_MODE_TRIM Values for inceptors trim positions, the exact meaning depends on the flight model. 2 MARSH_MANUAL_SETPOINT_MODE_TARGET Values for target inceptors positions that the pilot should follow. MOTION_PLATFORM_MODE [Enum] Mode of a motion platform system. Value Field Name Description 0 MOTION_PLATFORM_MODE_UNKNOWN Mode information is unsupported on this device. 1 MOTION_PLATFORM_MODE_UNINITIALIZED Mode is currently not available, but may be in different condition. 2 MOTION_PLATFORM_MODE_OFF Platform actuators are turned off, but control system is responsive. 3 MOTION_PLATFORM_MODE_SETTLED Platform is in the lowest position and/or locked, appropriate for personnel entry. 4 MOTION_PLATFORM_MODE_NEUTRAL Platform is in a neutral reference position, not accepting movement commands. 5 MOTION_PLATFORM_MODE_FROZEN Platform is stopped in any position, not accepting movement commands. 6 MOTION_PLATFORM_MODE_ENGAGED Platform is in any position, accepting movement commands. MOTION_PLATFORM_HEALTH [Enum] General error state of a motion platform system. Value Field Name Description 0 MOTION_PLATFORM_HEALTH_OK System is operating correctly. 1 MOTION_PLATFORM_HEALTH_WARNING There is at least one warning present, but operation can be continued. 2 MOTION_PLATFORM_HEALTH_ERROR There is a failure or misconfiguration that requires operator's attention for correct operation. 3 MOTION_PLATFORM_HEALTH_CRITICAL There is a major failure that requires immediate operator action to maintain safety. EYE_TRACKING_EVENT_TYPE [Enum] Type of event recognised from gaze data sent in EYE_TRACKING_EVENT . Value Field Name Description 0 EYE_TRACKING_EVENT_TYPE_BLINK Eye was partially closed. 1 EYE_TRACKING_EVENT_TYPE_FIXATION Gaze remained at particular location. Magnitude is the dispersion of position. 2 EYE_TRACKING_EVENT_TYPE_SACCADE Small rapid movement between fixations. Magnitude is the total angle of movement for this event. HUMAN_BODY_POINT [Enum] Location on human body tracked in HUMAN_BODY_POSE message. Initial 33 values correspond to points defined in MediaPipe Pose model. Value Field Name Description 0 HUMAN_BODY_POINT_NOSE Nose. 1 HUMAN_BODY_POINT_LEFT_EYE_INNER Left eye inner. 2 HUMAN_BODY_POINT_LEFT_EYE Left eye. 3 HUMAN_BODY_POINT_LEFT_EYE_OUTER Left eye outer. 4 HUMAN_BODY_POINT_RIGHT_EYE_INNER Right eye inner. 5 HUMAN_BODY_POINT_RIGHT_EYE Right eye. 6 HUMAN_BODY_POINT_RIGHT_EYE_OUTER Right eye outer. 7 HUMAN_BODY_POINT_LEFT_EAR Left ear. 8 HUMAN_BODY_POINT_RIGHT_EAR Right ear. 9 HUMAN_BODY_POINT_MOUTH_LEFT Mouth left. 10 HUMAN_BODY_POINT_MOUTH_RIGHT Mouth right. 11 HUMAN_BODY_POINT_LEFT_SHOULDER Left shoulder. 12 HUMAN_BODY_POINT_RIGHT_SHOULDER Right shoulder. 13 HUMAN_BODY_POINT_LEFT_ELBOW Left elbow. 14 HUMAN_BODY_POINT_RIGHT_ELBOW Right elbow. 15 HUMAN_BODY_POINT_LEFT_WRIST Left wrist. 16 HUMAN_BODY_POINT_RIGHT_WRIST Right wrist. 17 HUMAN_BODY_POINT_LEFT_PINKY Left pinky. 18 HUMAN_BODY_POINT_RIGHT_PINKY Right pinky. 19 HUMAN_BODY_POINT_LEFT_INDEX Left index. 20 HUMAN_BODY_POINT_RIGHT_INDEX Right index. 21 HUMAN_BODY_POINT_LEFT_THUMB Left thumb. 22 HUMAN_BODY_POINT_RIGHT_THUMB Right thumb. 23 HUMAN_BODY_POINT_LEFT_HIP Left hip. 24 HUMAN_BODY_POINT_RIGHT_HIP Right hip. 25 HUMAN_BODY_POINT_LEFT_KNEE Left knee. 26 HUMAN_BODY_POINT_RIGHT_KNEE Right knee. 27 HUMAN_BODY_POINT_LEFT_ANKLE Left ankle. 28 HUMAN_BODY_POINT_RIGHT_ANKLE Right ankle. 29 HUMAN_BODY_POINT_LEFT_HEEL Left heel. 30 HUMAN_BODY_POINT_RIGHT_HEEL Right heel. 31 HUMAN_BODY_POINT_LEFT_FOOT_INDEX Left foot index. 32 HUMAN_BODY_POINT_RIGHT_FOOT_INDEX Right foot index. MAVLink Commands ( MAV_CMD ) MAVLink commands ( MAV_CMD ) and messages are different! These commands define the values of up to 7 parameters that are packaged INSIDE specific messages used in the Mission Protocol and Command Protocol. Use commands for actions in missions or if you need acknowledgment and/or retry logic from a request. Otherwise use messages. MAVLink Messages CONTROL_LOADING_AXIS ( #52501 ) WORK IN PROGRESS: Do not use in stable production environments (it may change). [Message] (MAVLink 2) Send data about a control axis from a control loading system. This is the primary message for logging data from MARSH_TYPE_CONTROL_LOADING . Field Name Type Units Values Description time_boot_ms uint32_t ms Timestamp (time since system boot). axis uint8_t CONTROL_AXIS Control axis on which the measurements were taken. position float deg Axis position velocity float deg/s Axis velocity force float Force applied in the pilot in the direction of movement axis (not gripping force), measured at the position of pilot's third finger (ring). Unit N (Newton), currently not part of mavschema.xsd MOTION_PLATFORM_STATE ( #52502 ) [Message] (MAVLink 2) State report for motion platform used for moving the cockpit with the pilot for motion cueing. This is the primary message for MARSH_TYPE_MOTION_PLATFORM . Field Name Type Units Values Description time_boot_ms uint32_t ms Timestamp (time since system boot). health uint8_t MOTION_PLATFORM_HEALTH Generic system health (error and warning) status. mode uint8_t MOTION_PLATFORM_MODE Generic system operating mode. x float m X axis (surge) position, positive forward. y float m Y axis (sway) position, positive right. z float m Z axis (heave) position, positive down. roll float rad Roll position, positive right. pitch float rad Pitch position, positive nose up. yaw float rad Yaw position, positive right. vel_x float m/s X axis (surge) velocity, positive forward. vel_y float m/s Y axis (sway) velocity, positive right. vel_z float m/s Z axis (heave) velocity, positive down. vel_roll float rad/s Roll velocity, positive right. vel_pitch float rad/s Pitch velocity, positive nose up. vel_yaw float rad/s Yaw velocity, positive right. acc_x float m/s/s X axis (surge) acceleration, positive forward. acc_y float m/s/s Y axis (sway) acceleration, positive right. acc_z float m/s/s Z axis (heave) acceleration, positive down. acc_roll float Roll acceleration, positive right. Unit rad/s/s, currently not part of mavschema.xsd acc_pitch float Pitch acceleration, positive nose up. Unit rad/s/s, currently not part of mavschema.xsd acc_yaw float Yaw acceleration, positive right. Unit rad/s/s, currently not part of mavschema.xsd REXROTH_MOTION_PLATFORM ( #52503 ) [Message] (MAVLink 2) State report specific for eMotion Motion System by Bosch Rexroth B.V. Values applicable to motion platforms in general are sent in MOTION_PLATFORM_STATE with the same timestamp. Actuators are numbered in a clockwise direction when looking from above, starting from the front right. Actuator position is 0 when actuator is in mid-stroke. Field Name Type Units Description time_boot_ms uint32_t ms Timestamp (time since system boot). frame_count uint32_t Number of message as sent by the Motion System. motion_status uint32_t Motion Status variable as sent by the system. error_code uint8_t Error code extracted from motion status. actuator1 float m Current actuator 1 position. actuator2 float m Current actuator 2 position. actuator3 float m Current actuator 3 position. actuator4 float m Current actuator 4 position. actuator5 float m Current actuator 5 position. actuator6 float m Current actuator 6 position. platform_setpoint_x float m X axis (surge) platform setpoint, positive forward. platform_setpoint_y float m Y axis (sway) platform setpoint, positive right. platform_setpoint_z float m Z axis (heave) platform setpoint, positive down. platform_setpoint_roll float rad Roll platform setpoint, positive right. platform_setpoint_pitch float rad Pitch platform setpoint, positive nose up. platform_setpoint_yaw float rad Yaw platform setpoint, positive right. effect_setpoint_x float m X axis (surge) special effect setpoint, positive forward. effect_setpoint_y float m Y axis (sway) special effect setpoint, positive right. effect_setpoint_z float m Z axis (heave) special effect setpoint, positive down. effect_setpoint_roll float rad Roll special effect setpoint, positive right. effect_setpoint_pitch float rad Pitch special effect setpoint, positive nose up. effect_setpoint_yaw float rad Yaw special effect setpoint, positive right. MOTION_CUE_EXTRA ( #52504 ) [Message] (MAVLink 2) These values are an extra cue that should be added to accelerations and rotations etc. resulting from aircraft state, with the resulting cue being the sum of the latest aircraft and extra values. An example use case would be a cockpit shaker. Field Name Type Units Description time_boot_ms uint32_t ms Timestamp (time since system boot). vel_roll float rad/s Roll velocity, positive right. vel_pitch float rad/s Pitch velocity, positive nose up. vel_yaw float rad/s Yaw velocity, positive right. acc_x float m/s/s X axis (surge) acceleration, positive forward. acc_y float m/s/s Y axis (sway) acceleration, positive right. acc_z float m/s/s Z axis (heave) acceleration, positive down. EYE_TRACKING_DATA ( #52505 ) [Message] (MAVLink 2) Data for tracking of pilot eye gaze. This is the primary message for MARSH_TYPE_EYE_TRACKER . This is the average information about both eyes, if you need separate measurements send information with different sensor_id. Field Name Type Units Description time_usec uint64_t us Timestamp (UNIX Epoch time or time since system boot). sensor_id uint8_t Sensor ID, used for identifying the device and/or person tracked. Set to zero if unknown/unused. gaze_origin_x float m X axis of gaze origin point, NaN if unknown. The reference system depends on specific application. gaze_origin_y float m Y axis of gaze origin point, NaN if unknown. The reference system depends on specific application. gaze_origin_z float m Z axis of gaze origin point, NaN if unknown. The reference system depends on specific application. gaze_direction_x float X axis of gaze direction vector, expected to be normalized to unit magnitude, NaN if unknown. The reference system should match origin point. gaze_direction_y float Y axis of gaze direction vector, expected to be normalized to unit magnitude, NaN if unknown. The reference system should match origin point. gaze_direction_z float Z axis of gaze direction vector, expected to be normalized to unit magnitude, NaN if unknown. The reference system should match origin point. video_gaze_x float Gaze focal point on video feed x value (normalized 0..1, 0 is left, 1 is right), NaN if unknown video_gaze_y float Gaze focal point on video feed y value (normalized 0..1, 0 is top, 1 is bottom), NaN if unknown surface_id uint8_t Identifier of surface for 2D gaze point, or an identified region when surface point is invalid. Set to zero if unknown/unused. surface_gaze_x float Gaze focal point on surface x value (normalized 0..1, 0 is left, 1 is right), NaN if unknown surface_gaze_y float Gaze focal point on surface y value (normalized 0..1, 0 is top, 1 is bottom), NaN if unknown pupil_diameter float mm Estimated pupil diameter, NaN if unknown. EYE_TRACKING_EVENT ( #52506 ) WORK IN PROGRESS: Do not use in stable production environments (it may change). [Message] (MAVLink 2) Periodic events identified in eye tracking. Field Name Type Units Values Description time_usec uint64_t us Start timestamp (UNIX Epoch time or time since system boot). Should match time_usec field of EYE_TRACKING_DATA . sensor_id uint8_t Sensor ID, used for identifying the device and/or person tracked. Set to zero if unknown/unused. Should match sensor_id field of EYE_TRACKING_DATA . type uint8_t EYE_TRACKING_EVENT_TYPE Type of event. duration uint64_t us Duration of event. Set to zero if not applicable. confidence float Estimator confidence between 0 and 1. magnitude float deg Magnitude of the event dependent on type. Examples: dispersion of fixation, or range of movement for saccade etc. HUMAN_BODY_POSE ( #52507 ) WORK IN PROGRESS: Do not use in stable production environments (it may change). [Message] (MAVLink 2) Data for tracking of pilot body pose location. Field Name Type Units Values Description time_usec uint64_t us Timestamp (UNIX Epoch time or time since system boot). sensor_id uint8_t Sensor ID, used for identifying the device and/or person tracked. Set to zero if unknown/unused. body_point uint8_t HUMAN_BODY_POINT Specific point on the body described in this message. position_x float m X axis of body point location, NaN if unknown. The reference system depends on specific application. position_y float m Y axis of body point location, NaN if unknown. The reference system depends on specific application. position_z float m Z axis of body point location, NaN if unknown. The reference system depends on specific application. video_x float Body point on video feed x value (normalized 0..1, 0 is left, 1 is right), NaN if unknown video_y float Body point on video feed y value (normalized 0..1, 0 is top, 1 is bottom), NaN if unknown","title":"MARSH Dialect"},{"location":"mavlink/marsh/#marsh-dialect","text":"This page documents all extensions to MAVLink that were required for the simulator. The definitions are in the marsh.xml file on the dialect branch in our fork of main MAVLink repository . All other projects need to generate and appropriate libraries, following the mavlink.io \u2013 Generating MAVLink Libraries documentation. When in need of a definition for a given functionality which is not covered here, first consult the Common Message Set, both our subset and full list . If a new definition is actually needed, follow the original guide on how to define MAVLink Messages & Enums Note The ids of all messages have been changed in commit 3621719 on 2025-05-16 for inclusion in the upstream MAVLink repository. Custom messages saved in .tlog files before that change will not be recognised by newer code.","title":"MARSH Dialect"},{"location":"mavlink/marsh/#definition-list","text":"Generated on 2025-11-06T16:05:39 from commit 659be11 Enums MARSH_TYPE MARSH_MODE_FLAGS CONTROL_AXIS MARSH_MANUAL_SETPOINT_MODE MOTION_PLATFORM_MODE MOTION_PLATFORM_HEALTH EYE_TRACKING_EVENT_TYPE HUMAN_BODY_POINT Mav Commands Messages CONTROL_LOADING_AXIS MOTION_PLATFORM_STATE REXROTH_MOTION_PLATFORM MOTION_CUE_EXTRA EYE_TRACKING_DATA EYE_TRACKING_EVENT HUMAN_BODY_POSE MAVLink Include Files: common.xml This file has protocol dialect: 3.","title":"Definition list"},{"location":"mavlink/minimal/","text":"Minimal Set These are the messages which must be supported by any MAVLink system, reproduced from the original documentation at mavlink.io \u2013 MAVLink Minimal Set . The HEARTBEAT message is of special interest here, since it is used to communicate the node state to and from the Manager application. Generally the nodes in the simulator system are expected to send MAV_AUTOPILOT_INVALID . When choosing a component id, first see if there is a more specific one in MARSH_COMPONENT , otherwise use the standard values here. Definition list Generated on 2025-11-06T16:05:39 from commit 659be11 Enums MAV_AUTOPILOT MAV_TYPE MAV_MODE_FLAG MAV_MODE_FLAG_DECODE_POSITION MAV_STATE MAV_COMPONENT Mav Commands Messages HEARTBEAT PROTOCOL_VERSION MAVLink Protocol Version The current MAVLink version is 2.3. The minor version numbers (after the dot) range from 1-255. MAVLink Type Enumerations MAV_AUTOPILOT [Enum] Micro air vehicle / autopilot classes. This identifies the individual model. Value Field Name Description 0 MAV_AUTOPILOT_GENERIC Generic autopilot, full support for everything 1 MAV_AUTOPILOT_RESERVED Reserved for future use. 2 MAV_AUTOPILOT_SLUGS SLUGS autopilot, http://slugsuav.soe.ucsc.edu 3 MAV_AUTOPILOT_ARDUPILOTMEGA ArduPilot - Plane/Copter/Rover/Sub/Tracker, https://ardupilot.org 4 MAV_AUTOPILOT_OPENPILOT OpenPilot, http://openpilot.org 5 MAV_AUTOPILOT_GENERIC_WAYPOINTS_ONLY Generic autopilot only supporting simple waypoints 6 MAV_AUTOPILOT_GENERIC_WAYPOINTS_AND_SIMPLE_NAVIGATION_ONLY Generic autopilot supporting waypoints and other simple navigation commands 7 MAV_AUTOPILOT_GENERIC_MISSION_FULL Generic autopilot supporting the full mission command set 8 MAV_AUTOPILOT_INVALID No valid autopilot, e.g. a GCS or other MAVLink component 9 MAV_AUTOPILOT_PPZ PPZ UAV - http://nongnu.org/paparazzi 10 MAV_AUTOPILOT_UDB UAV Dev Board 11 MAV_AUTOPILOT_FP FlexiPilot 12 MAV_AUTOPILOT_PX4 PX4 Autopilot - http://px4.io/ 13 MAV_AUTOPILOT_SMACCMPILOT SMACCMPilot - http://smaccmpilot.org 14 MAV_AUTOPILOT_AUTOQUAD AutoQuad -- http://autoquad.org 15 MAV_AUTOPILOT_ARMAZILA Armazila -- http://armazila.com 16 MAV_AUTOPILOT_AEROB Aerob -- http://aerob.ru 17 MAV_AUTOPILOT_ASLUAV ASLUAV autopilot -- http://www.asl.ethz.ch 18 MAV_AUTOPILOT_SMARTAP SmartAP Autopilot - http://sky-drones.com 19 MAV_AUTOPILOT_AIRRAILS AirRails - http://uaventure.com 20 MAV_AUTOPILOT_REFLEX Fusion Reflex - https://fusion.engineering MAV_TYPE [Enum] MAVLINK component type reported in HEARTBEAT message. Flight controllers must report the type of the vehicle on which they are mounted (e.g. MAV_TYPE_OCTOROTOR ). All other components must report a value appropriate for their type (e.g. a camera must use MAV_TYPE_CAMERA ). Value Field Name Description 0 MAV_TYPE_GENERIC Generic micro air vehicle 1 MAV_TYPE_FIXED_WING Fixed wing aircraft. 2 MAV_TYPE_QUADROTOR Quadrotor 3 MAV_TYPE_COAXIAL Coaxial helicopter 4 MAV_TYPE_HELICOPTER Normal helicopter with tail rotor. 5 MAV_TYPE_ANTENNA_TRACKER Ground installation 6 MAV_TYPE_GCS Operator control unit / ground control station 7 MAV_TYPE_AIRSHIP Airship, controlled 8 MAV_TYPE_FREE_BALLOON Free balloon, uncontrolled 9 MAV_TYPE_ROCKET Rocket 10 MAV_TYPE_GROUND_ROVER Ground rover 11 MAV_TYPE_SURFACE_BOAT Surface vessel, boat, ship 12 MAV_TYPE_SUBMARINE Submarine 13 MAV_TYPE_HEXAROTOR Hexarotor 14 MAV_TYPE_OCTOROTOR Octorotor 15 MAV_TYPE_TRICOPTER Tricopter 16 MAV_TYPE_FLAPPING_WING Flapping wing 17 MAV_TYPE_KITE Kite 18 MAV_TYPE_ONBOARD_CONTROLLER Onboard companion controller 19 MAV_TYPE_VTOL_TAILSITTER_DUOROTOR Two-rotor Tailsitter VTOL that additionally uses control surfaces in vertical operation. Note, value previously named MAV_TYPE_VTOL_DUOROTOR . 20 MAV_TYPE_VTOL_TAILSITTER_QUADROTOR Quad-rotor Tailsitter VTOL using a V-shaped quad config in vertical operation. Note: value previously named MAV_TYPE_VTOL_QUADROTOR . 21 MAV_TYPE_VTOL_TILTROTOR Tiltrotor VTOL. Fuselage and wings stay (nominally) horizontal in all flight phases. It able to tilt (some) rotors to provide thrust in cruise flight. 22 MAV_TYPE_VTOL_FIXEDROTOR VTOL with separate fixed rotors for hover and cruise flight. Fuselage and wings stay (nominally) horizontal in all flight phases. 23 MAV_TYPE_VTOL_TAILSITTER Tailsitter VTOL. Fuselage and wings orientation changes depending on flight phase: vertical for hover, horizontal for cruise. Use more specific VTOL MAV_TYPE_VTOL_TAILSITTER_DUOROTOR or MAV_TYPE_VTOL_TAILSITTER_QUADROTOR if appropriate. 24 MAV_TYPE_VTOL_TILTWING Tiltwing VTOL. Fuselage stays horizontal in all flight phases. The whole wing, along with any attached engine, can tilt between vertical and horizontal mode. 25 MAV_TYPE_VTOL_RESERVED5 VTOL reserved 5 26 MAV_TYPE_GIMBAL Gimbal 27 MAV_TYPE_ADSB ADSB system 28 MAV_TYPE_PARAFOIL Steerable, nonrigid airfoil 29 MAV_TYPE_DODECAROTOR Dodecarotor 30 MAV_TYPE_CAMERA Camera 31 MAV_TYPE_CHARGING_STATION Charging station 32 MAV_TYPE_FLARM FLARM collision avoidance system 33 MAV_TYPE_SERVO Servo 34 MAV_TYPE_ODID Open Drone ID. See https://mavlink.io/en/services/opendroneid.html. 35 MAV_TYPE_DECAROTOR Decarotor 36 MAV_TYPE_BATTERY Battery 37 MAV_TYPE_PARACHUTE Parachute 38 MAV_TYPE_LOG Log 39 MAV_TYPE_OSD OSD 40 MAV_TYPE_IMU IMU 41 MAV_TYPE_GPS GPS 42 MAV_TYPE_WINCH Winch 43 MAV_TYPE_GENERIC_MULTIROTOR Generic multirotor that does not fit into a specific type or whose type is unknown 44 MAV_TYPE_ILLUMINATOR Illuminator. An illuminator is a light source that is used for lighting up dark areas external to the system: e.g. a torch or searchlight (as opposed to a light source for illuminating the system itself, e.g. an indicator light). 45 MAV_TYPE_SPACECRAFT_ORBITER Orbiter spacecraft. Includes satellites orbiting terrestrial and extra-terrestrial bodies. Follows NASA Spacecraft Classification. 46 MAV_TYPE_GROUND_QUADRUPED A generic four-legged ground vehicle (e.g., a robot dog). 47 MAV_TYPE_VTOL_GYRODYNE VTOL hybrid of helicopter and autogyro. It has a main rotor for lift and separate propellers for forward flight. The rotor must be powered for hover but can autorotate in cruise flight. See: https://en.wikipedia.org/wiki/Gyrodyne 48 MAV_TYPE_GRIPPER Gripper 49 MAV_TYPE_RADIO Radio MAV_MODE_FLAG [Enum] These flags encode the MAV mode, see MAV_MODE enum for useful combinations. Value Field Name Description 128 MAV_MODE_FLAG_SAFETY_ARMED 0b10000000 MAV safety set to armed. Motors are enabled / running / can start. Ready to fly. Additional note: this flag is to be ignore when sent in the command MAV_CMD_DO_SET_MODE and MAV_CMD_COMPONENT_ARM_DISARM shall be used instead. The flag can still be used to report the armed state. 64 MAV_MODE_FLAG_MANUAL_INPUT_ENABLED 0b01000000 remote control input is enabled. 32 MAV_MODE_FLAG_HIL_ENABLED 0b00100000 hardware in the loop simulation. All motors / actuators are blocked, but internal software is full operational. 16 MAV_MODE_FLAG_STABILIZE_ENABLED 0b00010000 system stabilizes electronically its attitude (and optionally position). It needs however further control inputs to move around. 8 MAV_MODE_FLAG_GUIDED_ENABLED 0b00001000 guided mode enabled, system flies waypoints / mission items. 4 MAV_MODE_FLAG_AUTO_ENABLED 0b00000100 autonomous mode enabled, system finds its own goal positions. Guided flag can be set or not, depends on the actual implementation. 2 MAV_MODE_FLAG_TEST_ENABLED 0b00000010 system has a test mode enabled. This flag is intended for temporary system tests and should not be used for stable implementations. 1 MAV_MODE_FLAG_CUSTOM_MODE_ENABLED 0b00000001 system-specific custom mode is enabled. When using this flag to enable a custom mode all other flags should be ignored. MAV_MODE_FLAG_DECODE_POSITION [Enum] These values encode the bit positions of the decode position. These values can be used to read the value of a flag bit by combining the base_mode variable with AND with the flag position value. The result will be either 0 or 1, depending on if the flag is set or not. Value Field Name Description 128 MAV_MODE_FLAG_DECODE_POSITION_SAFETY First bit: 10000000 64 MAV_MODE_FLAG_DECODE_POSITION_MANUAL Second bit: 01000000 32 MAV_MODE_FLAG_DECODE_POSITION_HIL Third bit: 00100000 16 MAV_MODE_FLAG_DECODE_POSITION_STABILIZE Fourth bit: 00010000 8 MAV_MODE_FLAG_DECODE_POSITION_GUIDED Fifth bit: 00001000 4 MAV_MODE_FLAG_DECODE_POSITION_AUTO Sixth bit: 00000100 2 MAV_MODE_FLAG_DECODE_POSITION_TEST Seventh bit: 00000010 1 MAV_MODE_FLAG_DECODE_POSITION_CUSTOM_MODE Eighth bit: 00000001 MAV_STATE [Enum] Value Field Name Description 0 MAV_STATE_UNINIT Uninitialized system, state is unknown. 1 MAV_STATE_BOOT System is booting up. 2 MAV_STATE_CALIBRATING System is calibrating and not flight-ready. 3 MAV_STATE_STANDBY System is grounded and on standby. It can be launched any time. 4 MAV_STATE_ACTIVE System is active and might be already airborne. Motors are engaged. 5 MAV_STATE_CRITICAL System is in a non-normal flight mode (failsafe). It can however still navigate. 6 MAV_STATE_EMERGENCY System is in a non-normal flight mode (failsafe). It lost control over parts or over the whole airframe. It is in mayday and going down. 7 MAV_STATE_POWEROFF System just initialized its power-down sequence, will shut down now. 8 MAV_STATE_FLIGHT_TERMINATION System is terminating itself (failsafe or commanded). MAV_COMPONENT [Enum] Legacy component ID values for particular types of hardware/software that might make up a MAVLink system (autopilot, cameras, servos, avoidance systems etc.). Components are not required or expected to use IDs with names that correspond to their type or function, but may choose to do so. Using an ID that matches the type may slightly reduce the chances of component id clashes, as, for historical reasons, it is less likely to be used by some other type of component. System integration will still need to ensure that all components have unique IDs. Component IDs are used for addressing messages to a particular component within a system. A component can use any unique ID between 1 and 255 ( MAV_COMP_ID_ALL value is the broadcast address, used to send to all components). Historically component ID were also used for identifying the type of component. New code must not use component IDs to infer the component type, but instead check the MAV_TYPE in the HEARTBEAT message! Value Field Name Description 0 MAV_COMP_ID_ALL Target id (target_component) used to broadcast messages to all components of the receiving system. Components should attempt to process messages with this component ID and forward to components on any other interfaces. Note: This is not a valid *source* component id for a message. 1 MAV_COMP_ID_AUTOPILOT1 System flight controller component (\"autopilot\"). Only one autopilot is expected in a particular system. 25 MAV_COMP_ID_USER1 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 26 MAV_COMP_ID_USER2 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 27 MAV_COMP_ID_USER3 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 28 MAV_COMP_ID_USER4 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 29 MAV_COMP_ID_USER5 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 30 MAV_COMP_ID_USER6 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 31 MAV_COMP_ID_USER7 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 32 MAV_COMP_ID_USER8 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 33 MAV_COMP_ID_USER9 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 34 MAV_COMP_ID_USER10 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 35 MAV_COMP_ID_USER11 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 36 MAV_COMP_ID_USER12 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 37 MAV_COMP_ID_USER13 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 38 MAV_COMP_ID_USER14 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 39 MAV_COMP_ID_USER15 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 40 MAV_COMP_ID_USER16 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 41 MAV_COMP_ID_USER17 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 42 MAV_COMP_ID_USER18 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 43 MAV_COMP_ID_USER19 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 44 MAV_COMP_ID_USER20 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 45 MAV_COMP_ID_USER21 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 46 MAV_COMP_ID_USER22 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 47 MAV_COMP_ID_USER23 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 48 MAV_COMP_ID_USER24 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 49 MAV_COMP_ID_USER25 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 50 MAV_COMP_ID_USER26 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 51 MAV_COMP_ID_USER27 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 52 MAV_COMP_ID_USER28 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 53 MAV_COMP_ID_USER29 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 54 MAV_COMP_ID_USER30 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 55 MAV_COMP_ID_USER31 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 56 MAV_COMP_ID_USER32 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 57 MAV_COMP_ID_USER33 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 58 MAV_COMP_ID_USER34 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 59 MAV_COMP_ID_USER35 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 60 MAV_COMP_ID_USER36 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 61 MAV_COMP_ID_USER37 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 62 MAV_COMP_ID_USER38 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 63 MAV_COMP_ID_USER39 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 64 MAV_COMP_ID_USER40 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 65 MAV_COMP_ID_USER41 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 66 MAV_COMP_ID_USER42 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 67 MAV_COMP_ID_USER43 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 68 MAV_COMP_ID_TELEMETRY_RADIO Telemetry radio (e.g. SiK radio, or other component that emits RADIO_STATUS messages). 69 MAV_COMP_ID_USER45 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 70 MAV_COMP_ID_USER46 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 71 MAV_COMP_ID_USER47 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 72 MAV_COMP_ID_USER48 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 73 MAV_COMP_ID_USER49 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 74 MAV_COMP_ID_USER50 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 75 MAV_COMP_ID_USER51 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 76 MAV_COMP_ID_USER52 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 77 MAV_COMP_ID_USER53 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 78 MAV_COMP_ID_USER54 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 79 MAV_COMP_ID_USER55 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 80 MAV_COMP_ID_USER56 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 81 MAV_COMP_ID_USER57 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 82 MAV_COMP_ID_USER58 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 83 MAV_COMP_ID_USER59 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 84 MAV_COMP_ID_USER60 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 85 MAV_COMP_ID_USER61 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 86 MAV_COMP_ID_USER62 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 87 MAV_COMP_ID_USER63 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 88 MAV_COMP_ID_USER64 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 89 MAV_COMP_ID_USER65 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 90 MAV_COMP_ID_USER66 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 91 MAV_COMP_ID_USER67 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 92 MAV_COMP_ID_USER68 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 93 MAV_COMP_ID_USER69 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 94 MAV_COMP_ID_USER70 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 95 MAV_COMP_ID_USER71 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 96 MAV_COMP_ID_USER72 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 97 MAV_COMP_ID_USER73 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 98 MAV_COMP_ID_USER74 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 99 MAV_COMP_ID_USER75 Id for a component on privately managed MAVLink network. Can be used for any purpose but may not be published by components outside of the private network. 100 MAV_COMP_ID_CAMERA Camera #1. 101 MAV_COMP_ID_CAMERA2 Camera #2. 102 MAV_COMP_ID_CAMERA3 Camera #3. 103 MAV_COMP_ID_CAMERA4 Camera #4. 104 MAV_COMP_ID_CAMERA5 Camera #5. 105 MAV_COMP_ID_CAMERA6 Camera #6. 110 MAV_COMP_ID_RADIO Radio #1. 111 MAV_COMP_ID_RADIO2 Radio #2. 112 MAV_COMP_ID_RADIO3 Radio #3. 140 MAV_COMP_ID_SERVO1 Servo #1. 141 MAV_COMP_ID_SERVO2 Servo #2. 142 MAV_COMP_ID_SERVO3 Servo #3. 143 MAV_COMP_ID_SERVO4 Servo #4. 144 MAV_COMP_ID_SERVO5 Servo #5. 145 MAV_COMP_ID_SERVO6 Servo #6. 146 MAV_COMP_ID_SERVO7 Servo #7. 147 MAV_COMP_ID_SERVO8 Servo #8. 148 MAV_COMP_ID_SERVO9 Servo #9. 149 MAV_COMP_ID_SERVO10 Servo #10. 150 MAV_COMP_ID_SERVO11 Servo #11. 151 MAV_COMP_ID_SERVO12 Servo #12. 152 MAV_COMP_ID_SERVO13 Servo #13. 153 MAV_COMP_ID_SERVO14 Servo #14. 154 MAV_COMP_ID_GIMBAL Gimbal #1. 155 MAV_COMP_ID_LOG Logging component. 156 MAV_COMP_ID_ADSB Automatic Dependent Surveillance-Broadcast (ADS-B) component. 157 MAV_COMP_ID_OSD On Screen Display (OSD) devices for video links. 158 MAV_COMP_ID_PERIPHERAL Generic autopilot peripheral component ID. Meant for devices that do not implement the parameter microservice. 159 MAV_COMP_ID_QX1_GIMBAL DEPRECATED: Replaced by MAV_COMP_ID_GIMBAL (2018-11). All gimbals should use MAV_COMP_ID_GIMBAL . Gimbal ID for QX1. 160 MAV_COMP_ID_FLARM FLARM collision alert component. 161 MAV_COMP_ID_PARACHUTE Parachute component. 169 MAV_COMP_ID_WINCH Winch component. 171 MAV_COMP_ID_GIMBAL2 Gimbal #2. 172 MAV_COMP_ID_GIMBAL3 Gimbal #3. 173 MAV_COMP_ID_GIMBAL4 Gimbal #4 174 MAV_COMP_ID_GIMBAL5 Gimbal #5. 175 MAV_COMP_ID_GIMBAL6 Gimbal #6. 180 MAV_COMP_ID_BATTERY Battery #1. 181 MAV_COMP_ID_BATTERY2 Battery #2. 189 MAV_COMP_ID_MAVCAN CAN over MAVLink client. 190 MAV_COMP_ID_MISSIONPLANNER Component that can generate/supply a mission flight plan (e.g. GCS or developer API). 191 MAV_COMP_ID_ONBOARD_COMPUTER Component that lives on the onboard computer (companion computer) and has some generic functionalities, such as settings system parameters and monitoring the status of some processes that don't directly speak mavlink and so on. 192 MAV_COMP_ID_ONBOARD_COMPUTER2 Component that lives on the onboard computer (companion computer) and has some generic functionalities, such as settings system parameters and monitoring the status of some processes that don't directly speak mavlink and so on. 193 MAV_COMP_ID_ONBOARD_COMPUTER3 Component that lives on the onboard computer (companion computer) and has some generic functionalities, such as settings system parameters and monitoring the status of some processes that don't directly speak mavlink and so on. 194 MAV_COMP_ID_ONBOARD_COMPUTER4 Component that lives on the onboard computer (companion computer) and has some generic functionalities, such as settings system parameters and monitoring the status of some processes that don't directly speak mavlink and so on. 195 MAV_COMP_ID_PATHPLANNER Component that finds an optimal path between points based on a certain constraint (e.g. minimum snap, shortest path, cost, etc.). 196 MAV_COMP_ID_OBSTACLE_AVOIDANCE Component that plans a collision free path between two points. 197 MAV_COMP_ID_VISUAL_INERTIAL_ODOMETRY Component that provides position estimates using VIO techniques. 198 MAV_COMP_ID_PAIRING_MANAGER Component that manages pairing of vehicle and GCS. 200 MAV_COMP_ID_IMU Inertial Measurement Unit (IMU) #1. 201 MAV_COMP_ID_IMU_2 Inertial Measurement Unit (IMU) #2. 202 MAV_COMP_ID_IMU_3 Inertial Measurement Unit (IMU) #3. 220 MAV_COMP_ID_GPS GPS #1. 221 MAV_COMP_ID_GPS2 GPS #2. 236 MAV_COMP_ID_ODID_TXRX_1 Open Drone ID transmitter/receiver (Bluetooth/WiFi/Internet). 237 MAV_COMP_ID_ODID_TXRX_2 Open Drone ID transmitter/receiver (Bluetooth/WiFi/Internet). 238 MAV_COMP_ID_ODID_TXRX_3 Open Drone ID transmitter/receiver (Bluetooth/WiFi/Internet). 240 MAV_COMP_ID_UDP_BRIDGE Component to bridge MAVLink to UDP (i.e. from a UART). 241 MAV_COMP_ID_UART_BRIDGE Component to bridge to UART (i.e. from UDP). 242 MAV_COMP_ID_TUNNEL_NODE Component handling TUNNEL messages (e.g. vendor specific GUI of a component). 243 MAV_COMP_ID_ILLUMINATOR Illuminator 250 MAV_COMP_ID_SYSTEM_CONTROL DEPRECATED: Replaced by MAV_COMP_ID_ALL (2018-11). System control does not require a separate component ID. Instead, system commands should be sent with target_component=MAV_COMP_ID_ALL allowing the target component to use any appropriate component id. Deprecated, don't use. Component for handling system messages (e.g. to ARM, takeoff, etc.). MAVLink Commands ( MAV_CMD ) MAVLink commands ( MAV_CMD ) and messages are different! These commands define the values of up to 7 parameters that are packaged INSIDE specific messages used in the Mission Protocol and Command Protocol. Use commands for actions in missions or if you need acknowledgment and/or retry logic from a request. Otherwise use messages. MAVLink Messages HEARTBEAT ( #0 ) [Message] The heartbeat message shows that a system or component is present and responding. The type and autopilot fields (along with the message component id), allow the receiving system to treat further messages from this system appropriately (e.g. by laying out the user interface based on the autopilot). This microservice is documented at https://mavlink.io/en/services/heartbeat.html Field Name Type Values Description type uint8_t MAV_TYPE Vehicle or component type. For a flight controller component the vehicle type (quadrotor, helicopter, etc.). For other components the component type (e.g. camera, gimbal, etc.). This should be used in preference to component id for identifying the component type. autopilot uint8_t MAV_AUTOPILOT Autopilot type / class. Use MAV_AUTOPILOT_INVALID for components that are not flight controllers. base_mode uint8_t MAV_MODE_FLAG System mode bitmap. custom_mode uint32_t A bitfield for use for autopilot-specific flags system_status uint8_t MAV_STATE System status flag. mavlink_version uint8_t_mavlink_version MAVLink version, not writable by user, gets added by protocol because of magic data type: uint8_t_mavlink_version PROTOCOL_VERSION ( #300 ) WORK IN PROGRESS: Do not use in stable production environments (it may change). [Message] (MAVLink 2) Version and capability of protocol version. This message can be requested with MAV_CMD_REQUEST_MESSAGE and is used as part of the handshaking to establish which MAVLink version should be used on the network. Every node should respond to a request for PROTOCOL_VERSION to enable the handshaking. Library implementers should consider adding this into the default decoding state machine to allow the protocol core to respond directly. Field Name Type Description version uint16_t Currently active MAVLink version number * 100: v1.0 is 100, v2.0 is 200, etc. min_version uint16_t Minimum MAVLink version supported max_version uint16_t Maximum MAVLink version supported (set to the same value as version by default) spec_version_hash uint8_t[8] The first 8 bytes (not characters printed in hex!) of the git hash. library_version_hash uint8_t[8] The first 8 bytes (not characters printed in hex!) of the git hash.","title":"Minimal Set"},{"location":"mavlink/minimal/#minimal-set","text":"These are the messages which must be supported by any MAVLink system, reproduced from the original documentation at mavlink.io \u2013 MAVLink Minimal Set . The HEARTBEAT message is of special interest here, since it is used to communicate the node state to and from the Manager application. Generally the nodes in the simulator system are expected to send MAV_AUTOPILOT_INVALID . When choosing a component id, first see if there is a more specific one in MARSH_COMPONENT , otherwise use the standard values here.","title":"Minimal Set"},{"location":"mavlink/minimal/#definition-list","text":"Generated on 2025-11-06T16:05:39 from commit 659be11 Enums MAV_AUTOPILOT MAV_TYPE MAV_MODE_FLAG MAV_MODE_FLAG_DECODE_POSITION MAV_STATE MAV_COMPONENT Mav Commands Messages HEARTBEAT PROTOCOL_VERSION","title":"Definition list"},{"location":"nodes/","text":"Simulator nodes The purpose of nodes is to maintain the separation of concerns principle. In short, if each node has a single responsibility, it is easier to reuse them in new ways and avoid repeating work (see rationale ). When ran as a command, nodes should accept the IP MARSH Manager with -m and --manager option. Nodes created so far have been collected in the marsh-sim/sim-nodes repository . You are welcome to ask questions, report bugs and contribute new scripts there. Lidia instruments Python package lidia can be used with MARSH starting with version 0.10 to provide instrument visualisation. It can be installed using the pip command: pip install lidia The package has multiple sources of data to choose from, in this case start it like this: lidia marsh","title":"Simulator nodes"},{"location":"nodes/#simulator-nodes","text":"The purpose of nodes is to maintain the separation of concerns principle. In short, if each node has a single responsibility, it is easier to reuse them in new ways and avoid repeating work (see rationale ). When ran as a command, nodes should accept the IP MARSH Manager with -m and --manager option. Nodes created so far have been collected in the marsh-sim/sim-nodes repository . You are welcome to ask questions, report bugs and contribute new scripts there.","title":"Simulator nodes"},{"location":"nodes/#lidia-instruments","text":"Python package lidia can be used with MARSH starting with version 0.10 to provide instrument visualisation. It can be installed using the pip command: pip install lidia The package has multiple sources of data to choose from, in this case start it like this: lidia marsh","title":"Lidia instruments"},{"location":"nodes/development/","text":"Node development Every component of the simulator should be a separate node. The nodes have to publish a HEARTBEAT message according to Heartbeat/Connection Protocol . There are additional simulator-specific values defined for type field, in the MARSH_TYPE enum, which occupy a currently unused region of the standard MAV_TYPE (and one day might clash). Correctly assigning types for each node makes it easier to identify them in the manager, and troubleshoot problems in simulation. Component ids can be allocated any value other than zero. Historically the component id was also used to determine the component type, for example MAV_COMP_ID_CAMERA6 . With that in mind, the default component id is still determined from the type to reduce the risk of collisions, according to this formula: component_id = MAV_COMP_ID_USER1 + (marsh_type - MARSH_TYPE_MANAGER) This assigns consecutive definitions starting with MAV_COMP_ID_USER1 , and is used throughout the authors' code. Warning Even though we have used the types to define our component IDs, your code must not make any assumption about the type from the id used (type is determined from HEARTBEAT.type , as stated in the MAVLink documentaton If someone were to make a mistake and use MARSH_TYPE directly as component id, they would show up as CAMERA to CAMERA6 Example repository There are multiple examples of ready-made nodes and utility functions in the marsh-sim/sim-nodes repository . The names of scripts should hint at the type of component from MARSH_TYPE . These are at the end of the name, and the beginning something unique, to make running a given script easier from terminal with Tab-completion. Message choice For communicating any node-specific feature the workflow is as follows: Check if there is already a relevant convention for a feature in Microservices section of Dev Guide If nothing was found, search the Common Message Set Read documentation for the service: e.g. Parameter Protocol Read documentation for specific messages: e.g. SIM_STATE (#108)","title":"Development"},{"location":"nodes/development/#node-development","text":"Every component of the simulator should be a separate node. The nodes have to publish a HEARTBEAT message according to Heartbeat/Connection Protocol . There are additional simulator-specific values defined for type field, in the MARSH_TYPE enum, which occupy a currently unused region of the standard MAV_TYPE (and one day might clash). Correctly assigning types for each node makes it easier to identify them in the manager, and troubleshoot problems in simulation. Component ids can be allocated any value other than zero. Historically the component id was also used to determine the component type, for example MAV_COMP_ID_CAMERA6 . With that in mind, the default component id is still determined from the type to reduce the risk of collisions, according to this formula: component_id = MAV_COMP_ID_USER1 + (marsh_type - MARSH_TYPE_MANAGER) This assigns consecutive definitions starting with MAV_COMP_ID_USER1 , and is used throughout the authors' code. Warning Even though we have used the types to define our component IDs, your code must not make any assumption about the type from the id used (type is determined from HEARTBEAT.type , as stated in the MAVLink documentaton If someone were to make a mistake and use MARSH_TYPE directly as component id, they would show up as CAMERA to CAMERA6","title":"Node development"},{"location":"nodes/development/#example-repository","text":"There are multiple examples of ready-made nodes and utility functions in the marsh-sim/sim-nodes repository . The names of scripts should hint at the type of component from MARSH_TYPE . These are at the end of the name, and the beginning something unique, to make running a given script easier from terminal with Tab-completion.","title":"Example repository"},{"location":"nodes/development/#message-choice","text":"For communicating any node-specific feature the workflow is as follows: Check if there is already a relevant convention for a feature in Microservices section of Dev Guide If nothing was found, search the Common Message Set Read documentation for the service: e.g. Parameter Protocol Read documentation for specific messages: e.g. SIM_STATE (#108)","title":"Message choice"},{"location":"nodes/eye-tracking/","text":"Eye tracking This article describes setup for eye tracking experiments using a wearable eye tracker (not VR helmet). Prerequisites Eye tracking device, we're using Pupil Labs Core Pupil Capture software on a computer with USB-C port to which the device will be connected PureRef art reference program for showing marker overlay on every computer showing a pilot screen Download .pur files from eye_tracking folder in sim-nodes repo on computers with PureRef Usage The PureRef scenes are prepared to display AprilTags tag36h11 markers in every corner of the screen. Steps to use a scene on a given display. The PureRef menu is opened by right clicking in the window, or any of the images when shown as overlay. Open the .pur file With no selection, click \"Mode > Overlay Selection\" and accept Select all four images, can be done with Ctrl+A if some of them are off screen, drag and scale to fit the corners of the display Check \"Mode > Always On Top\" Check \"Canvas > Lock Canvas\" Check \"Mode > Transparent To Mouse\" and accept If you need to change anything after this point, you need to focus the PureRef window in a different way than clicking on it, for example from the taskbar. Defined screens The following are provided as reference for what is in .pur files found in the repository, and to propose some consistent values for surface_id field of EYE_TRACKING_DATA message. Instruments Surface id 1 , example: page pfd of lidia . Outside view Surface id 2 with a view outside the aircraft, or just the screen with visualisation Inceptors Surface id 3 showing control positions, example: page controls of lidia . Drone control Surface id 4 for controlling cooperating Unmanned Aerial Vehicles (UAVs), example: an instance of QGroundControl Creating new screens The images in the AprilTags repository have a very small resolution, with pixels corresponding to marker features. After loading them into PureRef and scaling to a a larger size they will look blurry. To fix that, toggle image sampling on selected images to \"nearest neighbor\" with Alt+T , and/or set this sampling as default in the settings. To keep a consistent size, open one of the reference images in full screen, and adjust one of the markers to match. Once one marker in a scene has a correct size, select it first followed by any other, then right click and select \"Images > Normalize > From first > Size\". Similarly, when an image is positioned in a desired corner, select the reference first, then an image you want to move and use \"Images > Align > Left/Up, etc.\", which can also be done with Ctrl and arrow keys. Warning As of writing, the images cannot cover the task bar in Windows. It's suggested to align them with the taskbar instead, but when defining the surface in Pupil Capture, move the corner to corner of the display. When finished, you can save the PureRef scene to .pur file using \"Save > Save as\" menu. This file is self-contained, including the data of all used images. With the overlay shown on screen, follow the instructions about Surface Tracking in Pupil Capture documentation . For the pupil_eye_tracker script to correctly label the surfaces, name the surfaces same way as subsections in Defined screens .","title":"Eye tracking"},{"location":"nodes/eye-tracking/#eye-tracking","text":"This article describes setup for eye tracking experiments using a wearable eye tracker (not VR helmet).","title":"Eye tracking"},{"location":"nodes/eye-tracking/#prerequisites","text":"Eye tracking device, we're using Pupil Labs Core Pupil Capture software on a computer with USB-C port to which the device will be connected PureRef art reference program for showing marker overlay on every computer showing a pilot screen Download .pur files from eye_tracking folder in sim-nodes repo on computers with PureRef","title":"Prerequisites"},{"location":"nodes/eye-tracking/#usage","text":"The PureRef scenes are prepared to display AprilTags tag36h11 markers in every corner of the screen. Steps to use a scene on a given display. The PureRef menu is opened by right clicking in the window, or any of the images when shown as overlay. Open the .pur file With no selection, click \"Mode > Overlay Selection\" and accept Select all four images, can be done with Ctrl+A if some of them are off screen, drag and scale to fit the corners of the display Check \"Mode > Always On Top\" Check \"Canvas > Lock Canvas\" Check \"Mode > Transparent To Mouse\" and accept If you need to change anything after this point, you need to focus the PureRef window in a different way than clicking on it, for example from the taskbar.","title":"Usage"},{"location":"nodes/eye-tracking/#defined-screens","text":"The following are provided as reference for what is in .pur files found in the repository, and to propose some consistent values for surface_id field of EYE_TRACKING_DATA message.","title":"Defined screens"},{"location":"nodes/eye-tracking/#instruments","text":"Surface id 1 , example: page pfd of lidia .","title":"Instruments"},{"location":"nodes/eye-tracking/#outside-view","text":"Surface id 2 with a view outside the aircraft, or just the screen with visualisation","title":"Outside view"},{"location":"nodes/eye-tracking/#inceptors","text":"Surface id 3 showing control positions, example: page controls of lidia .","title":"Inceptors"},{"location":"nodes/eye-tracking/#drone-control","text":"Surface id 4 for controlling cooperating Unmanned Aerial Vehicles (UAVs), example: an instance of QGroundControl","title":"Drone control"},{"location":"nodes/eye-tracking/#creating-new-screens","text":"The images in the AprilTags repository have a very small resolution, with pixels corresponding to marker features. After loading them into PureRef and scaling to a a larger size they will look blurry. To fix that, toggle image sampling on selected images to \"nearest neighbor\" with Alt+T , and/or set this sampling as default in the settings. To keep a consistent size, open one of the reference images in full screen, and adjust one of the markers to match. Once one marker in a scene has a correct size, select it first followed by any other, then right click and select \"Images > Normalize > From first > Size\". Similarly, when an image is positioned in a desired corner, select the reference first, then an image you want to move and use \"Images > Align > Left/Up, etc.\", which can also be done with Ctrl and arrow keys. Warning As of writing, the images cannot cover the task bar in Windows. It's suggested to align them with the taskbar instead, but when defining the surface in Pupil Capture, move the corner to corner of the display. When finished, you can save the PureRef scene to .pur file using \"Save > Save as\" menu. This file is self-contained, including the data of all used images. With the overlay shown on screen, follow the instructions about Surface Tracking in Pupil Capture documentation . For the pupil_eye_tracker script to correctly label the surfaces, name the surfaces same way as subsections in Defined screens .","title":"Creating new screens"}]}